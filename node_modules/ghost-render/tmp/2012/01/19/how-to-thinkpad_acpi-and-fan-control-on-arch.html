<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>How to: thinkpad_acpi and fan control on Arch</title>	

	<meta name="description" content="">
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="How to: thinkpad_acpi and fan control on Arch">
    <meta name="twitter:description" content="">
    <meta name="twitter:site" content="@username">
	<meta name="twitter:creator" content="@username">

    <meta property="og:type" content="article">
    <meta property="og:title" content="How to: thinkpad_acpi and fan control on Arch">
    <meta property="og:description" content="">

    <link rel="stylesheet" href="/assets/css/style.css">

    <meta name="generator" content="Ghost ?" />
<link rel="alternate" type="application/rss+xml" title="Mixu&#39;s blog" href="/rss/">
<link rel="canonical" href="http://localhost:5000//2012/01/19/how-to-thinkpad_acpi-and-fan-control-on-arch.md" />	
</head>
<body class="post-template">
	
<main id="container" role="main">
	<header class="header" role="banner" style="background-image: url(/assets/img/header.jpg);">
		<h1 class="blog-title">
			<a href="http://localhost:5000">Mixu&#x27;s blog</a>
		</h1>
		<div class="blog-description">A blog</div>
	</header>
	<nav class="menu" role="navigation">
		<a href="#">Home</a>
		<span class="delimiter">&#8226;</span>
		<a href="#">About</a>
		<span class="delimiter">&#8226;</span>
		<a href="#">Contacts</a>
	</nav>
	<section class="post-full">
		<article itemscope itemtype="http://schema.org/BlogPosting" role="article" class="post">
			<header class="post-header">        		
    			<h2 itemprop="name headline" class="post-title">
    				<a href="/2012/01/19/how-to-thinkpad_acpi-and-fan-control-on-arch.html" itemprop="url">How to: thinkpad_acpi and fan control on Arch</a>
    			</h2>
    			<div class="post-meta">
        			<time datetime="2012-01-19" itemprop="datePublished">January 19, 2012</time>
        		</div>
        		<hr>
    		</header>
    		<section itemprop="articleBody" class="post-content">
    			<p>From the &quot;this might help some random person&quot; department - setting up manual Thinkpad fan control in Arch Linux.</p>
<ol>
<li><p>Edit /etc/rc.conf. Add thinkpad_acpi to MODULES=() in the hardware section.</p>
</li>
<li><p>Create a new file enabling fan control as /etc/modprobe.d/thinkfan.conf:</p>
</li>
</ol>
<pre class="hljs"><code><span class="hljs-title">options</span> thinkpad_acpi fan_control=<span class="hljs-number">1</span></code></pre><ol>
<li>Reload the thinkpad_acpi module:</li>
</ol>
<pre class="hljs"><code><span class="hljs-built_in">sudo</span> modprobe -r thinkpad_acpi &amp;amp;&amp;amp; <span class="hljs-built_in">sudo</span> modprobe thinkpad_acpi</code></pre><p>To view the current fan speed:</p>
<pre class="hljs"><code>[~]$ cat /<span class="hljs-keyword">proc</span>/acpi/ibm/fan
status: enabled
speed: <span class="hljs-number">2887</span>
level: <span class="hljs-number">4</span>
commands: level ( <span class="hljs-keyword">is</span> <span class="hljs-number">0</span>-<span class="hljs-number">7</span>, <span class="hljs-type">auto</span>, disengaged, full-speed)
commands: enable, disable
commands: watchdog ( <span class="hljs-keyword">is</span> <span class="hljs-number">0</span> (off), <span class="hljs-number">1</span>-<span class="hljs-number">120</span> (seconds))</code></pre><p>To control fan speed:</p>
<pre class="hljs"><code># echo level <span class="hljs-number">0</span> | sudo tee <span class="hljs-regexp">/proc/</span>acpi<span class="hljs-regexp">/ibm/</span>fan (fan off)
# echo level <span class="hljs-number">2</span> | sudo tee <span class="hljs-regexp">/proc/</span>acpi<span class="hljs-regexp">/ibm/</span>fan (low speed)
# echo level <span class="hljs-number">4</span> | sudo tee <span class="hljs-regexp">/proc/</span>acpi<span class="hljs-regexp">/ibm/</span>fan (medium speed)
# echo level <span class="hljs-number">7</span> | sudo tee <span class="hljs-regexp">/proc/</span>acpi<span class="hljs-regexp">/ibm/</span>fan (maximum speed)
# echo level auto | sudo tee <span class="hljs-regexp">/proc/</span>acpi<span class="hljs-regexp">/ibm/</span>fan (automatic - <span class="hljs-keyword">default</span>)</code></pre><p>For easy control from the command line:</p>
<pre class="hljs"><code>function fan() {
  sensors
  echo level $@ | sudo tee /<span class="hljs-keyword">proc</span>/acpi/ibm/fan
}</code></pre><p>Now you can run <code>fan 2</code> to set the fan level to 2 and so on.</p>
<p>To view fan speed, install lm_sensors <a href="https://wiki.archlinux.org/index.php/Lm_sensors">following the instructions on the Arch wiki</a>. Example output:</p>
<pre class="hljs"><code>[~]$ sensors
acpitz-virtual-<span class="hljs-number">0</span>
Adapter: Virtual device
temp1:        +<span class="hljs-number">37.0</span>°<span class="hljs-keyword">C</span>  (crit = +<span class="hljs-number">99.0</span>°<span class="hljs-keyword">C</span>)

thinkpad-isa-<span class="hljs-number">0000</span>
Adapter: ISA adapter
fan1:        <span class="hljs-number">2904</span> RPM

coretemp-isa-<span class="hljs-number">0000</span>
Adapter: ISA adapter
Physical id <span class="hljs-number">0</span>:  +<span class="hljs-number">39.0</span>°<span class="hljs-keyword">C</span>  (high = +<span class="hljs-number">86.0</span>°<span class="hljs-keyword">C</span>, crit = +<span class="hljs-number">100.0</span>°<span class="hljs-keyword">C</span>)
Core <span class="hljs-number">0</span>:         +<span class="hljs-number">37.0</span>°<span class="hljs-keyword">C</span>  (high = +<span class="hljs-number">86.0</span>°<span class="hljs-keyword">C</span>, crit = +<span class="hljs-number">100.0</span>°<span class="hljs-keyword">C</span>)
Core <span class="hljs-number">1</span>:         +<span class="hljs-number">37.0</span>°<span class="hljs-keyword">C</span>  (high = +<span class="hljs-number">86.0</span>°<span class="hljs-keyword">C</span>, crit = +<span class="hljs-number">100.0</span>°<span class="hljs-keyword">C</span>)
Core <span class="hljs-number">2</span>:         +<span class="hljs-number">35.0</span>°<span class="hljs-keyword">C</span>  (high = +<span class="hljs-number">86.0</span>°<span class="hljs-keyword">C</span>, crit = +<span class="hljs-number">100.0</span>°<span class="hljs-keyword">C</span>)
Core <span class="hljs-number">3</span>:         +<span class="hljs-number">39.0</span>°<span class="hljs-keyword">C</span>  (high = +<span class="hljs-number">86.0</span>°<span class="hljs-keyword">C</span>, crit = +<span class="hljs-number">100.0</span>°<span class="hljs-keyword">C</span>)</code></pre><h2 id="comments">Comments</h2>
<p><strong><a href="#566" title="2012-06-08 02:34:39">Mateusz Loskot</a>:</strong> Thanks for the quick and clear how-to.
FYI, I used it in my response to one of thinkfan questions on the Arch forum:
<a href="https://bbs.archlinux.org/viewtopic.php?pid=1112691#p1112691">https://bbs.archlinux.org/viewtopic.php?pid=1112691#p1112691</a></p>

    		</section>
    		<footer class="post-footer">
    			<div itemscope itemprop="author" itemtype="http://schema.org/Person" class="post-author">
	                	<img itemprop="image" src="http://www.gravatar.com/avatar/F0AF2953911805542C66FD43B2F8FC38?s=155" alt="Mixu" class="post-author-avatar">
					<div class="post-author-info">
		              	<span itemprop="name">Mixu</span>
		              	<p itemprop="description" class="post-author-bio">Node.js developer</p>
	              	</div>
    			</div>
    		</footer>
		</article>
		
		<section itemprop="comment" class="post-comments">
			<div id="disqus_thread"></div>
			<script type="text/javascript">            
				var disqus_shortname = 'example';
		
			    (function() {
			        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
			        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
			        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
			    })();
			</script>
			<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
			<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
		</section>	</section>

	<footer class="footer" role="contentinfo">
		<div class="social-links-line"></div>
		<section class="social-links">
	        <div class="social-links-inner">
	        	<a class="icon icon-feed" href="http://localhost:5000/rss/" target="_blank">
	        		<i class="fa fa-rss"></i>
	        	</a>
	        	
	        	<a class="icon icon-twitter" href="http://twitter.com/" target="_blank">				
	        		<i class="fa fa-twitter"></i>
	        	</a>
	        	
	        	<a class="icon icon-facebook" href="http://facebook.com/" target="_blank">
	        		<i class="fa fa-facebook"></i>
	        	</a>
	        	
	        	<a class="icon icon-google-plus" href="http://plus.google.com/" target="_blank">
	        		<i class="fa fa-google-plus"></i>
	        	</a>
	        	
	        	<a class="icon icon-dribbble" href="http://dribbble.com/" target="_blank">
	        		<i class="fa fa-dribbble"></i>
	        	</a>
	        	
	        	<a class="icon icon-flickr" href="http://flickr.com/" target="_blank">
	        		<i class="fa fa-flickr"></i>
	        	</a>
	        	
	        	<a class="icon icon-foursquare" href="http://foursquare.com/" target="_blank">
	        		<i class="fa fa-foursquare"></i>
	        	</a>
	        	
	        	<a class="icon icon-instagram" href="http://instagram.com/" target="_blank">
	        		<i class="fa fa-instagram"></i>
	        	</a>
	        	
	        	<a class="icon icon-github" href="http://github.com/" target="_blank">
	        		<i class="fa fa-github"></i>
	        	</a>
	        	
	        	<a class="icon icon-tumblr" href="http://tumblr.com/" target="_blank">
	        		<i class="fa fa-tumblr"></i>
	        	</a>
	        	
	        	<a class="icon icon-pinterest" href="http://pinterest.com/" target="_blank">
	        		<i class="fa fa-pinterest"></i>
	        	</a>
	        	
	        	<a class="icon icon-linkedin" href="http://linkedin.com/" target="_blank">
	        		<i class="fa fa-linkedin"></i>
	        	</a>
	        	
	        	<a class="icon icon-vk" href="http://vk.com/" target="_blank">
	        		<i class="fa fa-vk"></i>
	        	</a>        </div>               
	    </section>
	</footer></main>

	<script src="/assets/js/jquery.min.js"></script>
    <script type="text/javascript" src="/assets/js/main.min.js"></script>
</body>
</html>