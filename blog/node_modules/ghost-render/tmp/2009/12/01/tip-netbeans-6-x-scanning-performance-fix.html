<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>Tip: Netbeans 6.x scanning performance fix</title>	

	<meta name="description" content="">
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Tip: Netbeans 6.x scanning performance fix">
    <meta name="twitter:description" content="">
    <meta name="twitter:site" content="@username">
	<meta name="twitter:creator" content="@username">

    <meta property="og:type" content="article">
    <meta property="og:title" content="Tip: Netbeans 6.x scanning performance fix">
    <meta property="og:description" content="">

    <link rel="stylesheet" href="/assets/css/style.css">

    <meta name="generator" content="Ghost ?" />
<link rel="alternate" type="application/rss+xml" title="Mixu&#39;s blog" href="/rss/">
<link rel="canonical" href="http://localhost:5000//2009/12/01/tip-netbeans-6-x-scanning-performance-fix.md" />	
</head>
<body class="post-template">
	
<main id="container" role="main">
	<header class="header" role="banner" style="background-image: url(/assets/img/header.jpg);">
		<h1 class="blog-title">
			<a href="http://localhost:5000">Mixu&#x27;s blog</a>
		</h1>
		<div class="blog-description">A blog</div>
	</header>
	<nav class="menu" role="navigation">
		<a href="#">Home</a>
		<span class="delimiter">&#8226;</span>
		<a href="#">About</a>
		<span class="delimiter">&#8226;</span>
		<a href="#">Contacts</a>
	</nav>
	<section class="post-full">
		<article itemscope itemtype="http://schema.org/BlogPosting" role="article" class="post">
			<header class="post-header">        		
    			<h2 itemprop="name headline" class="post-title">
    				<a href="/2009/12/01/tip-netbeans-6-x-scanning-performance-fix.html" itemprop="url">Tip: Netbeans 6.x scanning performance fix</a>
    			</h2>
    			<div class="post-meta">
        			<time datetime="2009-12-01" itemprop="datePublished">December 01, 2009</time>
        		</div>
        		<hr>
    		</header>
    		<section itemprop="articleBody" class="post-content">
    			<p>I use <a href="http://www.netbeans.org/">Netbeans</a> as my primary editor. It&#39;s a great editor with pretty much all the features I would want built in (zero-configuration Mercurial support, code completion+navigation, unit testing support and more) .</p>
<p>The only caveat has been the performance - I was so frustrated I installed (and ultimately rejected) the vast majority of other (PHP) editors. There is a simple fix if you have memory to spare: increase the heap size in the startup options. The Java VM default heap size seems to be way too small, causing a lot of swapping within the Java VM (while not using all the memory available from the OS perspective).</p>
<p><strong>Fixing Netbeans scanning performance </strong></p>
<p>Open /etc/netbeans.conf (e.g. C:Program FilesNetbeans 6.xetcnetbeans.conf). If you are on Windows 7, you need to start your text editor with Administrator privileges (right click and select Run as..).</p>
<p>Change the line: netbeans_default_options=&quot;-J-client -J-Xverify:none ....&quot;</p>
<p>by adding the following to the single line (AFTER &quot;-J-client -J-Xverify:none&quot;):</p>
<pre class="hljs"><code>-<span class="ruby"><span class="hljs-constant">J</span>-<span class="hljs-constant">Xmx2048m</span> -<span class="hljs-constant">J</span>-<span class="hljs-constant">XX</span><span class="hljs-symbol">:+UseConcMarkSweepGC</span> -<span class="hljs-constant">J</span>-<span class="hljs-constant">XX</span><span class="hljs-symbol">:+CMSClassUnloadingEnabled</span>
</span>-<span class="ruby"><span class="hljs-constant">J</span>-<span class="hljs-constant">XX</span><span class="hljs-symbol">:+CMSPermGenSweepingEnabled</span></span></code></pre><p>The -Xmx option changes the maximum heap size the Java virtual machine can address to 2048M from the default value (which is a &quot;best guess&quot; method). The other three are explained in the conf file.</p>
<p>DONE! Ever since I made this tweak (about two months ago) there have been no additional pauses at all. My theory is that the Netbeans scanning code was exhausting the heap, and a majority of the time &quot;scanning&quot; was instead spent dealing with the heap exhaustion. Now I will not say that it is reasonable for an IDE to consume 2 gigabytes of memory - but if that&#39;s what it takes to fix performance, fine.</p>
<p>&nbsp;</p>
<h2 id="comments">Comments</h2>
<p><strong><a href="#74" title="2009-12-02 04:48:13">Petr Jiricka</a>:</strong> Hi, thanks for blogging about this. We would like to fix the problem so you don&#39;t have to do this workaround. Can I ask:</p>
<ul>
<li>Is your experience based on NetBeans 6.7.x or 6.8 RC1? We made significant improvements in NB 6.8, so can you please try whether it behaves better out of the box?</li>
<li>Can you be specific about how big is your project (number of files), and how long the scanning takes+how often you face the problem? We regularly test performance on mid-size projects, but it is true that there can be problems for huge projects.</li>
<li>Can you tell us about your hardware? I.e. size of memory, processor etc? Also, do you store your source files locally, or on a remote/network drive?</li>
<li>Can you test the performance of working with your project outside of the Mercurial tree? I.e. if you export the sources from Mercurial and then point the IDE at the exported sources (and closing the project inside the Mercurial tree).</li>
</ul>
<p>Thanks for your help - if you like, you can send your replies to my e-mail petr.jiricka at sun dot com.</p>
<p>Petr</p>
<p><strong><a href="#75" title="2009-12-02 07:48:12">Mikito Takada</a>:</strong> Hi Petr,</p>
<p>I am stunned that you responded so quickly, and very glad to hear that the Netbeans team is actively working on the issue (and clearly keeping a Google Alert on Netbeans!).</p>
<p>1) My experience is based on Netbeans 6.7, and at least for 6.8 Beta I had the same issue. I installed 6.8 RC1 yesterday, so I will have to see if the issue still occurs without the workaround, and update the post accordingly in a few days.</p>
<p>2) The projects are about 2000 - 5000 files excluding Mercurial directories. On 6.7, the scanning used to take random amounts of time (sometimes minutes, sometimes hours unless stopped). With the fix, the time went down to to mere seconds. Will see with 6.8RC1.</p>
<p>3) Core i7-920 + 6GB memory with source files stored locally on what I would imagine is a 7200rpm drive.</p>
<p>4) Will see later and post an update here.</p>
<p><strong><a href="#76" title="2009-12-09 15:17:23">AdamO</a>:</strong> I was having the same problem with Netbeans 6.7.1...  I have my source folder (9000+ files) mounted over sftp via Webdrive (caching enabled).  Scanning was taking forever and locking up the rest of the app, making it impossible to do anything until after scanning had stopped.  I just tried 6.8RC2 and scanning still takes a while, but at least it doesn&#39;t lock up everything else.  Now I&#39;m able to work comfortably with the scan in progress.</p>
<p><strong><a href="#77" title="2009-12-10 17:31:02">Adam Overlock</a>:</strong> I also noticed there&#39;s a &quot;Scan on Demand&quot; plugin available for 6.8RC2, allowing you to disable automatic scanning and run it when you want it to run.</p>
<p><strong><a href="#78" title="2009-12-19 02:33:54">Randy</a>:</strong> If scanning was properly implemented in Netbeans, it would be in a discrete thread, prioritized lower than the app. It&#39;s insane that when it scans, you can&#39;t do anything else. Yes, in 6.8 this happens.</p>
<p>I have a quad core, and the app is locked scanning with less than 5% cpu usage.</p>
<p>R</p>
<p><strong><a href="#79" title="2009-12-22 12:23:53">Mike</a>:</strong> I have the same issue with 6.8. The CPU usage is not always high, but the UI is so slow it is unusable.  I am going to try upping the heap.  Thanks for the post.</p>
<p><strong><a href="#80" title="2010-01-25 14:32:21">Tres Finocchiaro</a>:</strong> I&#39;m experiencing this on Windows 7 Enterprise x86 single core CPU.  I will try the suggested work-around, however I agree with the Netbeans developer that fixing this as part of the release cycle makes it better for stuff like upgrading.</p>
<p>The release information:
    Product Version: NetBeans IDE 6.8 (Build 200912041610)
    Java: 1.5.0_22; Java HotSpot(TM) Client VM 1.5.0_22-b03
    System: Windows 7 version 6.1 running on x86; Cp1252; en_US (nb)
    Userdir: C:Userstfino.netbeans6.8</p>
<p>-Tres</p>
<p><strong><a href="#81" title="2010-02-15 22:48:27">hemuman</a>:</strong> My problem Solved with &quot;Scan on Demand&quot;. It use to scan for ages....
thanks Adam Overlock</p>
<p><strong><a href="#82" title="2010-04-17 20:45:25">Roy</a>:</strong> But if you use Scan on demand, you indexes could be out of date and could cause some lost of data.</p>
<p><strong><a href="#83" title="2010-05-19 14:55:32">Bruce</a>:</strong> I also noticed there&#39;s a &quot;Scan on Demand&quot; plugin available for 6.8RC2, allowing you to disable automatic scanning and run it when you want it to run.</p>
<p><strong><a href="#84" title="2010-08-29 06:27:35">g</a>:</strong> that&#39;s right!</p>
<p>combination of enabling Scan On Demand Plugin
and also disabling Mercury Plugin</p>
<p>make our CPU Usage more safer... and lower of course...
glad to hear everything is now stable... :D</p>
<p><strong><a href="#85" title="2011-02-28 11:05:35">Thorsten</a>:</strong> Thanks for this article. The CPU usage of netbeans was realy horrible.</p>
<p>Noe after changing the config it is realy usable. Maybe I will try the scan ondemand plugin later.</p>
<p>thanks</p>
<p><strong><a href="#86" title="2012-01-12 12:43:07">Rob Haag</a>:</strong> Thank You! Just got a Win. machine (linux nerd myself)...same issue for me...even now using NB 7.1 on Windows 7 (64bit). Have a 2 core (intel 6200) w/ 4gb of RAM...your fix made a huge difference. I&#39;m remoting to my Linux box so I can take the show on the road now and again, but even with a local project (empty) the &#39;scanning&#39; was hanging forever on 100% mark.</p>
<p><strong><a href="#87" title="2012-02-17 14:55:38">Raja</a>:</strong> Friends,
   I also affected by the Scanning Projects issue. after i installed the Scan on Demand plugin also can&#39;t solved this.
  Finally i removed my - Project  - right Click -&gt; Project Properties - removed one big folder(user_java- under this all the project files here). then only solved this issue. So pls just check for this small pin pbms and corrected.</p>
<p>Thanks,
CRT.</p>

    		</section>
    		<footer class="post-footer">
    			<div itemscope itemprop="author" itemtype="http://schema.org/Person" class="post-author">
	                	<img itemprop="image" src="http://www.gravatar.com/avatar/F0AF2953911805542C66FD43B2F8FC38?s=155" alt="Mixu" class="post-author-avatar">
					<div class="post-author-info">
		              	<span itemprop="name">Mixu</span>
		              	<p itemprop="description" class="post-author-bio">Node.js developer</p>
	              	</div>
    			</div>
    		</footer>
		</article>
		
		<section itemprop="comment" class="post-comments">
			<div id="disqus_thread"></div>
			<script type="text/javascript">            
				var disqus_shortname = 'example';
		
			    (function() {
			        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
			        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
			        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
			    })();
			</script>
			<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
			<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
		</section>	</section>

	<footer class="footer" role="contentinfo">
		<div class="social-links-line"></div>
		<section class="social-links">
	        <div class="social-links-inner">
	        	<a class="icon icon-feed" href="http://localhost:5000/rss/" target="_blank">
	        		<i class="fa fa-rss"></i>
	        	</a>
	        	
	        	<a class="icon icon-twitter" href="http://twitter.com/" target="_blank">				
	        		<i class="fa fa-twitter"></i>
	        	</a>
	        	
	        	<a class="icon icon-facebook" href="http://facebook.com/" target="_blank">
	        		<i class="fa fa-facebook"></i>
	        	</a>
	        	
	        	<a class="icon icon-google-plus" href="http://plus.google.com/" target="_blank">
	        		<i class="fa fa-google-plus"></i>
	        	</a>
	        	
	        	<a class="icon icon-dribbble" href="http://dribbble.com/" target="_blank">
	        		<i class="fa fa-dribbble"></i>
	        	</a>
	        	
	        	<a class="icon icon-flickr" href="http://flickr.com/" target="_blank">
	        		<i class="fa fa-flickr"></i>
	        	</a>
	        	
	        	<a class="icon icon-foursquare" href="http://foursquare.com/" target="_blank">
	        		<i class="fa fa-foursquare"></i>
	        	</a>
	        	
	        	<a class="icon icon-instagram" href="http://instagram.com/" target="_blank">
	        		<i class="fa fa-instagram"></i>
	        	</a>
	        	
	        	<a class="icon icon-github" href="http://github.com/" target="_blank">
	        		<i class="fa fa-github"></i>
	        	</a>
	        	
	        	<a class="icon icon-tumblr" href="http://tumblr.com/" target="_blank">
	        		<i class="fa fa-tumblr"></i>
	        	</a>
	        	
	        	<a class="icon icon-pinterest" href="http://pinterest.com/" target="_blank">
	        		<i class="fa fa-pinterest"></i>
	        	</a>
	        	
	        	<a class="icon icon-linkedin" href="http://linkedin.com/" target="_blank">
	        		<i class="fa fa-linkedin"></i>
	        	</a>
	        	
	        	<a class="icon icon-vk" href="http://vk.com/" target="_blank">
	        		<i class="fa fa-vk"></i>
	        	</a>        </div>               
	    </section>
	</footer></main>

	<script src="/assets/js/jquery.min.js"></script>
    <script type="text/javascript" src="/assets/js/main.min.js"></script>
</body>
</html>