<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>How to watch Hulu videos via SSH tunneling</title>	

	<meta name="description" content="">
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="How to watch Hulu videos via SSH tunneling">
    <meta name="twitter:description" content="">
    <meta name="twitter:site" content="@username">
	<meta name="twitter:creator" content="@username">

    <meta property="og:type" content="article">
    <meta property="og:title" content="How to watch Hulu videos via SSH tunneling">
    <meta property="og:description" content="">

    <link rel="stylesheet" href="/assets/css/style.css">

    <meta name="generator" content="Ghost ?" />
<link rel="alternate" type="application/rss+xml" title="Mixu&#39;s blog" href="/rss/">
<link rel="canonical" href="http://localhost:5000//2009/05/05/how-to-watch-hulu-videos-via-ssh-tunneling.md" />	
</head>
<body class="post-template">
	
<main id="container" role="main">
	<header class="header" role="banner" style="background-image: url(/assets/img/header.jpg);">
		<h1 class="blog-title">
			<a href="http://localhost:5000">Mixu&#x27;s blog</a>
		</h1>
		<div class="blog-description">A blog</div>
	</header>
	<nav class="menu" role="navigation">
		<a href="#">Home</a>
		<span class="delimiter">&#8226;</span>
		<a href="#">About</a>
		<span class="delimiter">&#8226;</span>
		<a href="#">Contacts</a>
	</nav>
	<section class="post-full">
		<article itemscope itemtype="http://schema.org/BlogPosting" role="article" class="post">
			<header class="post-header">        		
    			<h2 itemprop="name headline" class="post-title">
    				<a href="/2009/05/05/how-to-watch-hulu-videos-via-ssh-tunneling.html" itemprop="url">How to watch Hulu videos via SSH tunneling</a>
    			</h2>
    			<div class="post-meta">
        			<time datetime="2009-05-05" itemprop="datePublished">May 05, 2009</time>
        		</div>
        		<hr>
    		</header>
    		<section itemprop="articleBody" class="post-content">
    			<p style="text-align: center; "><img class="size-full wp-image-36 aligncenter" title="hulu" src="http://blog.mixu.net/files/2009/05/hulu.png" alt="hulu" width="586" height="242" /></p>

<p><strong>Update 2 (Oct 2009):</strong> Since this is reasonably popular content, here are some additional findings:</p>
<p>First, Flash does not always use the same settings as your browser - try the proxy settings in Internet Explorer/Chrome. These seem to work better. The vast majority of problems are a result of Flash using different settings than your browser, revealing your actual IP to Hulu.</p>
<p>Second, if this does not work you can always use <a href="http://www.proxifier.com/">Proxifier </a>(commercial product with 30 days trial), a TCP wrapper which forces all connections on the computer to use a particular proxy. This can be used in conjunction with a Hulu downloader, such as <a href="http://lifehacker.com/5310467/hulu-video-downloader-saves-your-favorite-shows-for-offline-enjoyment">Hulu Video Downloader</a> to download the videos.</p>
<p><strong><em>Update:</em></strong><em> Still works </em><a href="http://www.techcrunch.com/2009/05/06/control-freaks-hulu-now-blocks-anonymous-proxies-too/"><em>even after Hulu tightened their geofiltering</em></a><em>. As long as one isn&#39;t using a mainstream service like Hotspot Shield, I doubt Hulu will be able to fully block this since they are in essence removing access from legitimate US computers. Probably the best thing would be to have a server set up in a legitimate, large institution such a US university or have a home-based server on a consumer ISP in the US. Both would make it hard to block the IP without causing legitimate users to be blocked as well. Then again, for me this is more of an interesting thing to do rather than a necessity. Mileage may vary depending on how proactive Hulu gets, in the end all anyone needs is one non-blocked legitimate IP address in the US.</em></p>
<p>If you haven&#39;t heard of <a href="http://en.wikipedia.org/wiki/Hulu">Hulu</a>, it&#39;s basically a website like YouTube but with full episodes of recent TV series - legal and with short commercials inserted into the video streams. For instance, the HBO show <a href="http://en.wikipedia.org/wiki/C.S.I.">CSI </a>is available on the site very soon after it has been shown in the US and you can watch it directly as streaming video. There is one caveat - the website blocks non-US viewers from watching any of the videos. So, no luck for us Finns.</p>
<p>However, this is rather easy to get around if you happen to have a server based in the US with SSH access. What you need to do is set up a SSH tunnel to your US server, then instruct your web browser to connect via that tunnel. This will cause all connections to Hulu to go through your US server, and will make it possible to watch Hulu videos.</p>
<p><strong>Setting up using the SSH command/PuTTy</strong></p>
<p>SSH allows you to connect securely to the server and create a secure tunnel from your computer to the US-based server. You can set up a local SSH client program to do this.</p>
<pre class="hljs"><code><span class="hljs-title">ssh</span> -D <span class="hljs-number">8080</span> -p <span class="hljs-number">22</span> -f -N username<span class="hljs-variable">@yourserver</span>.com</code></pre><p>As the SSH manual page states the -D option:</p>
<pre class="hljs"><code>-D port. Specifies <span class="hljs-operator">a</span> <span class="hljs-built_in">local</span> <span class="hljs-string">&quot;dynamic&quot;</span> application-level port forwarding.
 This works <span class="hljs-keyword">by</span> allocating <span class="hljs-operator">a</span> <span class="hljs-built_in">socket</span> <span class="hljs-built_in">to</span> listen <span class="hljs-built_in">to</span> port <span class="hljs-command"><span class="hljs-keyword">on</span> <span class="hljs-title">the</span> <span class="hljs-title">local</span> <span class="hljs-title">side</span>, </span>
<span class="hljs-operator">and</span> whenever <span class="hljs-operator">a</span> connection is made <span class="hljs-built_in">to</span> this port, <span class="hljs-operator">the</span> connection is
forwarded over <span class="hljs-operator">the</span> secure channel, <span class="hljs-operator">and</span> <span class="hljs-operator">the</span> application protocol is <span class="hljs-keyword">then</span>
used <span class="hljs-built_in">to</span> determine where <span class="hljs-built_in">to</span> connect <span class="hljs-built_in">to</span> <span class="hljs-built_in">from</span> <span class="hljs-operator">the</span> remote machine.  Currently
<span class="hljs-operator">the</span> SOCKS4 <span class="hljs-operator">and</span> SOCKS5 protocols are supported, <span class="hljs-operator">and</span> ssh will act <span class="hljs-keyword">as</span> <span class="hljs-operator">a</span> SOCKS server.</code></pre><p>You can also do this in Windows using the PuTTy SSH client. Look under Connection -&gt; SSH -&gt; Tunnels. Add a dynamic port forward, use port 8080 and no need to specify the destination.</p>
<p><strong>Setting Firefox to use the tunnel</strong></p>
<p>Then set up Firefox to use the local SOCKS server (localhost:8080). The relevant settings can be found under Tools -&gt; Options -&gt; Advanced -&gt; Network -&gt; Settings ... -&gt; Manual proxy configuration.</p>
<p><strong>Testing</strong></p>
<p>This works very nicely, because you are now connecting from an US IP. To verify this, open up Internet Explorer and check <a href="http://www.whatsmyip.org/">http://www.whatsmyip.org/</a> and do the same in Firefox. You should see two different IP addresses. Just remember that any videos you watch will be transferred twice (from a bandwidth usage perspective) - once to your US server and then back. A single video is only about a hundred megabytes or so, so this not particularly bad for the convinience though.</p>
<h2 id="comments">Comments</h2>
<p><strong><a href="#3" title="2009-05-12 12:34:40">Mike</a>:</strong> Am I missing a step?</p>
<p>I have generated a public and private key via Cpanel on my US server. I have followed the instructions to the T as above. Don&#39;t I have tell Putty what my keys are?</p>
<p><strong><a href="#4" title="2009-05-12 12:56:15">admin</a>:</strong> That depends on whether you are using public key authentication or only password authentication (check sshd_config). I don&#39;t know about Cpanel, never used it, but I would first  try connecting to the server via Putty. If your ssh daemon is configured to use public key authentication, then you will not be able to connect without a key.</p>
<p>If that works, then the next step would be set up the tunnel. Also, I recommend restarting your Firefox after changing the proxy settings or use the FoxyProxy addon - sometimes I have had odd glitches in applying the proxy settings in Firefox which went away when I used the addon.</p>
<p><strong><a href="#5" title="2009-05-12 17:24:58">Mike</a>:</strong> Well, learned a lot about Putty and SSH in Cpanel today. So far I have Putty allowing me to login to my server using my private key via Jail Shell (host doesn&#39;t offer SSH).</p>
<p>Where I&#39;m lost is the instructions:</p>
<p>Putty: Connection -&gt; SSH -&gt; Tunnels. Add a dynamic port forward, use port 8080
Firefox: Tools -&gt; Options -&gt; Advanced -&gt; Network -&gt; Settings â€¦ -&gt; Manual proxy configuration</p>
<p>Instructions say to set the port to 8080. I tried that didn&#39;t work. The host has me using port 3765 so I tried that too.</p>
<p>Browser gives me error, and refuses to connect.</p>
<p>Is it Jail Shell messing with me here?</p>
<p><strong><a href="#6" title="2009-05-12 17:26:54">Mike</a>:</strong> Sorry, didn&#39;t see your update here until I refreshed...will try your suggestions with Firefox next.</p>
<p><strong><a href="#7" title="2009-05-12 19:13:40">admin</a>:</strong> When you try to access a site such as Google via your browser, if what you get is long wait then probably there is something wrong with the browser settings (try FoxyProxy). This means that the browser is accessing the tunnel but something is wrong.</p>
<p>If, however, you get a connection refused (or similar) error almost immediately, then check the SSH tunnel. You might have to wrong port, or restrictive firewall settings on your computer.</p>
<p>Also, since it seems you do not fully control your server (shared hosting?), there is the possibility that the AllowTcpForwarding setting is &quot;no&quot; for the ssh daemon, which means that tunneling is not allowed on the ssh daemon on the server - in which case you need to upgrade to something that allows you to configure your server fully.</p>
<p><strong><a href="#8" title="2009-05-14 08:50:55">Maccer</a>:</strong> I&#39;m sorry but I didn&#39;t get the Setting up Firefox to use the tunnel part. I don&#39;t know where to put localhost:8080. Please help me. I&#39;m desperate.</p>
<p><strong><a href="#9" title="2009-05-14 09:19:54">admin</a>:</strong> How to change proxy settings in Firefox 2.x and FireFox 3.x</p>
<p><a href="http://it.usu.edu/htm/tutorials/firefox-proxy/">http://it.usu.edu/htm/tutorials/firefox-proxy/</a></p>
<p>(Ignore the stuff about the password and so on, those obviously do not apply when using the tunnel.)</p>
<p><strong><a href="#10" title="2009-05-18 18:28:24">daniel</a>:</strong> Sorry to be a kill-joy, but I&#39;m pretty sure a SSH tunnel won&#39;t cut it, at least it doesn&#39;t for me. I assume that hulu uses UDP to provide the video thus making the SSH tunnel only viable for loading thumbnails and such, but not for the actual video streaming.
I get the &quot;unable to to stream this video &quot; error despite being connected by a SSH tunnel through a US box.
What we need is a way to tunnel (hulu specific) UDP traffic over the established SSH tunnel.
A real VPN would always be the preferred way of course, but since most of the cheap virtual server hosts don&#39;t offer the necessary interfaces to build a VPN, we&#39;re left with SSH tunneling as the only viable option.</p>
<p>Any ideas here?</p>
<p><strong><a href="#11" title="2009-05-19 07:29:03">admin</a>:</strong> Nope, still works. And Hulu does not seem to use UDP for watching videos, at least I am not seeing any additional packets coming in received while watching a video.</p>
<p>If you can see the site via your browser, and your browser IP is correct (US), then I can&#39;t think of other reasons than that Flash is not using the tunnel to connect - might be that Flash on Linux/Mac will not obey the proxy settings.</p>
<p>Of course it could also be that your server is blocked by Hulu or that different shows have different streaming mechanisms, although I doubt that either of these is the reason. I haven&#39;t tested this extensively, so mileage may vary.</p>
<p><strong><a href="#12" title="2009-05-24 17:28:22">Parneix</a>:</strong> I have the same problem as Daniel : though I&#39;m able to open a SSH tunnel giving me a US IP adress (and I know how to configure my network setting on a Mac to get both Safari and Forefox to use it) I still can&#39;t get anything from Hulu. I also tried this trick (see link), but still no success. Any idea? Thanks a lot for the article.</p>
<p><a href="http://mattourne.blogspot.com/2009/01/watch-hulucom-outside-us-on-mac-os-x.html">http://mattourne.blogspot.com/2009/01/watch-hulucom-outside-us-on-mac-os-x.html</a></p>
<p>P.</p>
<p><strong><a href="#13" title="2009-05-24 17:33:57">Parneix</a>:</strong> The info I get from Proxifier while trying to connect to Hulu is the following. Maybe it could help someone to understand what&#39;s going on (and wrong) :</p>
<p>Error : The proxy server localhost:8080 has unexpectedly terminated the connection
JavaApplicationS - Could not connect to 127.0.0.1:17747 through the proxy server</p>
<p>Thanks again.</p>
<p>P.</p>
<p><strong><a href="#14" title="2009-05-24 20:31:10">admin</a>:</strong> I did a bit digging on this issue with OSX, and apparently Adobe Flash does not always obey the proxy settings set in the browser or the OS.</p>
<p>Have a look at this bug filed for Flash: <a href="http://bugs.adobe.com/jira/browse/FP-673">http://bugs.adobe.com/jira/browse/FP-673</a></p>
<p>As for Parneix, you are clearly on the right track. What exactly is shown on your browser when you access Hulu versus some other site like google or whatsmyip? Screenshots?</p>
<p>I haven&#39;t used OSX but I suspect the problem is with Flash not obeying the proxy settings, it seems the proxy server at localhost:8080 is trying to connect to localhost (127.0.0.1) to get data, which is incorrect.</p>
<p><strong><a href="#15" title="2009-05-28 20:18:11">Anonymous</a>:</strong> I&#39;m not convinced this actually works.</p>
<p>I&#39;m quite aware of SSH tunneling as a way to proxy a connection, I&#39;ve used this technique for years on many OS&#39;s. I&#39;m currently on a Vista machine and I&#39;m having no luck with Hulu. That&#39;s actually why I&#39;m still searching blogs for a working SSH tunnel solution.</p>
<p>I also assumed Flash was not respecting proxy settings, and it seems to be the case on my Windows machine. Are you sure you&#39;re not American and don&#39;t know it? :)</p>
<p><strong><a href="#16" title="2009-06-16 19:05:41">Anonymous</a>:</strong> Use either HTTP SSL proxy (i.e. HTTP proxy with CONNECT option) or SOCKS proxy (e.g. SSH tunnel) and proxify browser through it using ProxyCap <a href="http://www.megaupload.com/?d=JA74JPR7">http://www.megaupload.com/?d=JA74JPR7</a> (ProxyCap works only on 32-bit Windows)</p>
<p>That&#39;s the only workaround for flash player bug.</p>
<p>Also you can use Transporter (which includes hack to remove ads...) + ProxyCap.</p>
<p><strong><a href="#17" title="2009-07-01 07:56:44">anon</a>:</strong> Does the hulu video go through the tunnel such that anyone sniffing your packets cannot tell you are watching a video? Like at work.</p>
<p><strong><a href="#18" title="2009-12-04 10:02:58">Shon</a>:</strong> Nope this wont work with Hulu anymore. Though it will work with some other sites such as Pandora or whatismyip.com</p>
<p>The reason it doesn&#39;t work with Hulu is mainly because Flash/RTMP does not respect the system / browsers proxy settings. The browser functions will work so Hulu won&#39;t flag you for being outside the US but when the browser tells flash to initiate the stream it fails with &quot;Sorry we are unable to stream this video&quot;. Adobe does not consider this a problem. This is the same issue as a general SOCKS proxy will have.</p>
<p>To access Hulu you need a VPN solution that actually tunnels the traffic at the network layer. OR you could use some specific software to catch those RTMP requests and redirect them to a proxy. Foxyproxy has a software solution (video helper) for windows I believe. Though I&#39;m on a mac so VPN it is.</p>
<p><strong><a href="#19" title="2010-02-28 02:47:57">Mike</a>:</strong> I was able to get this working using Proxifier and a SSH tunnel through our Yankee server. Proxifier will route all network traffic through the tunnel, this includes Adobe flash.</p>
<p><strong><a href="#20" title="2010-05-12 19:17:53">Mike</a>:</strong> Hulu is a no go.... I was able to connect to ABC.com, youtube.com (accessing restricted content) and fox.com</p>
<p><strong><a href="#21" title="2010-05-16 15:33:43">Tunneling</a>:</strong> You can use the software from <a href="http://www.interwap.ro">http://www.interwap.ro</a> . They have free access at 384kbps and low prices for up to 50mbps high speeds.</p>
<p><strong><a href="#22" title="2010-08-30 16:27:12">Jay</a>:</strong> UDP??   Do you understand what UDP is?   Or better, why this would not work for streaming a video?</p>
<p><strong><a href="#23" title="2010-10-28 08:44:51">Lala</a>:</strong> One key critical piece of missing information is that you need is block outgoing connections to a few of Hulu&#39;s servers on your local machine.</p>
<p>Flash attempts connections in the following manner:</p>
<ol>
<li>Try connecting directly to the server</li>
<li>If that failed, try connecting through the proxy server specified in IE.
If #1 succeeds, Flash would completely bypass your SSH tunnel and reveal your real IP to Hulu.</li>
</ol>
<p>So you need to figure out the servers that Hulu us trying to connect to, and block them. To figure out the servers:</p>
<ol>
<li>Install &quot;Live HTTP Headers&quot; addon for Firefox and open it up</li>
<li>Go to the Hulu video you want to watch</li>
<li>In the Generator window, you will see a few urls that Hulu is hitting. The ones ending in /fcs/ident and /fcs/ident2 are interesting to us. They would be something like &quot;hulufs.fplive.net&quot; and &quot;hulu-123.fcod.llwnd.net&quot;</li>
<li>Figure out the IPs for these 2 servers... simply ping it or something. Do it for both your local connection and your SSH servers, so you would end up with 4 different IPs. The hosts are on a round-robin DNS so they will give up different IPs.</li>
</ol>
<p>Now to block the IPs, in Vista/Win7, you can simply use the built-in firewall that comes as part of the OS. Any low level firewall which can be custom configured should work. For Vista/Win7:</p>
<ol>
<li>Start menu -&gt; type in &quot;Windows Firewall with Advanced Security&quot;.</li>
<li>Go to Outbound Rules in the left panel</li>
<li>Click on New Rule on the right panel</li>
<li>Select: Custom Rule, click Next</li>
<li>Select: All Programs, click Next</li>
<li>Select: Any for protocol type, click Next</li>
<li>For scope, add the 4 IPs you found to the REMOTE IP addresses list, click Next</li>
<li>Select Block the Connection, click Next</li>
<li>Select all profiles, click Next</li>
<li>Name it, and Finish</li>
</ol>
<p>And finally...</p>
<ol>
<li>Set the socks proxy server in IE to localhost:8080 or whatever you specified (only the socks proxy, not the rest) and enable it</li>
<li>Set the socks proxy server in whatever browser you&#39;re using (Firefox, Opera, etc). Chrome should use the IE setting.</li>
</ol>
<p>And after that long process, you should be able to view any Hulu video.</p>
<p>The IPs/Servers might change, so you might need to expand your IP block list from time to time.</p>
<p><strong><a href="#24" title="2010-10-28 09:34:08">Mikito Takada</a>:</strong> Thank you for the in-depth explanation! Awesome!</p>
<p><strong><a href="#25" title="2011-04-01 23:56:04">d</a>:</strong> brilliant.</p>
<p>thank you!!!!!</p>
<p>done on my mac connecting to one of my servers in the states.</p>
<p>Didn&#39;t need to block any hulu IP&#39;s.</p>
<p><strong><a href="#26" title="2011-04-01 23:57:41">Mikito Takada</a>:</strong> Good to hear that this still works!</p>

    		</section>
    		<footer class="post-footer">
    			<div itemscope itemprop="author" itemtype="http://schema.org/Person" class="post-author">
	                	<img itemprop="image" src="http://www.gravatar.com/avatar/F0AF2953911805542C66FD43B2F8FC38?s=155" alt="Mixu" class="post-author-avatar">
					<div class="post-author-info">
		              	<span itemprop="name">Mixu</span>
		              	<p itemprop="description" class="post-author-bio">Node.js developer</p>
	              	</div>
    			</div>
    		</footer>
		</article>
		
		<section itemprop="comment" class="post-comments">
			<div id="disqus_thread"></div>
			<script type="text/javascript">            
				var disqus_shortname = 'example';
		
			    (function() {
			        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
			        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
			        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
			    })();
			</script>
			<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
			<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
		</section>	</section>

	<footer class="footer" role="contentinfo">
		<div class="social-links-line"></div>
		<section class="social-links">
	        <div class="social-links-inner">
	        	<a class="icon icon-feed" href="http://localhost:5000/rss/" target="_blank">
	        		<i class="fa fa-rss"></i>
	        	</a>
	        	
	        	<a class="icon icon-twitter" href="http://twitter.com/" target="_blank">				
	        		<i class="fa fa-twitter"></i>
	        	</a>
	        	
	        	<a class="icon icon-facebook" href="http://facebook.com/" target="_blank">
	        		<i class="fa fa-facebook"></i>
	        	</a>
	        	
	        	<a class="icon icon-google-plus" href="http://plus.google.com/" target="_blank">
	        		<i class="fa fa-google-plus"></i>
	        	</a>
	        	
	        	<a class="icon icon-dribbble" href="http://dribbble.com/" target="_blank">
	        		<i class="fa fa-dribbble"></i>
	        	</a>
	        	
	        	<a class="icon icon-flickr" href="http://flickr.com/" target="_blank">
	        		<i class="fa fa-flickr"></i>
	        	</a>
	        	
	        	<a class="icon icon-foursquare" href="http://foursquare.com/" target="_blank">
	        		<i class="fa fa-foursquare"></i>
	        	</a>
	        	
	        	<a class="icon icon-instagram" href="http://instagram.com/" target="_blank">
	        		<i class="fa fa-instagram"></i>
	        	</a>
	        	
	        	<a class="icon icon-github" href="http://github.com/" target="_blank">
	        		<i class="fa fa-github"></i>
	        	</a>
	        	
	        	<a class="icon icon-tumblr" href="http://tumblr.com/" target="_blank">
	        		<i class="fa fa-tumblr"></i>
	        	</a>
	        	
	        	<a class="icon icon-pinterest" href="http://pinterest.com/" target="_blank">
	        		<i class="fa fa-pinterest"></i>
	        	</a>
	        	
	        	<a class="icon icon-linkedin" href="http://linkedin.com/" target="_blank">
	        		<i class="fa fa-linkedin"></i>
	        	</a>
	        	
	        	<a class="icon icon-vk" href="http://vk.com/" target="_blank">
	        		<i class="fa fa-vk"></i>
	        	</a>        </div>               
	    </section>
	</footer></main>

	<script src="/assets/js/jquery.min.js"></script>
    <script type="text/javascript" src="/assets/js/main.min.js"></script>
</body>
</html>