<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>Organizing Javascript code</title>	

	<meta name="description" content="">
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Organizing Javascript code">
    <meta name="twitter:description" content="">
    <meta name="twitter:site" content="@username">
	<meta name="twitter:creator" content="@username">

    <meta property="og:type" content="article">
    <meta property="og:title" content="Organizing Javascript code">
    <meta property="og:description" content="">

    <link rel="stylesheet" href="/assets/css/style.css">

    <meta name="generator" content="Ghost ?" />
<link rel="alternate" type="application/rss+xml" title="Mixu&#39;s blog" href="/rss/">
<link rel="canonical" href="http://localhost:5000//2010/01/26/organizing-javascript-code.md" />	
</head>
<body class="post-template">
	
<main id="container" role="main">
	<header class="header" role="banner" style="background-image: url(/assets/img/header.jpg);">
		<h1 class="blog-title">
			<a href="http://localhost:5000">Mixu&#x27;s blog</a>
		</h1>
		<div class="blog-description">A blog</div>
	</header>
	<nav class="menu" role="navigation">
		<a href="#">Home</a>
		<span class="delimiter">&#8226;</span>
		<a href="#">About</a>
		<span class="delimiter">&#8226;</span>
		<a href="#">Contacts</a>
	</nav>
	<section class="post-full">
		<article itemscope itemtype="http://schema.org/BlogPosting" role="article" class="post">
			<header class="post-header">        		
    			<h2 itemprop="name headline" class="post-title">
    				<a href="/2010/01/26/organizing-javascript-code.html" itemprop="url">Organizing Javascript code</a>
    			</h2>
    			<div class="post-meta">
        			<time datetime="2010-01-26" itemprop="datePublished">January 26, 2010</time>
        		</div>
        		<hr>
    		</header>
    		<section itemprop="articleBody" class="post-content">
    			<p>Javascript is an interesting language because it is flexible and surprisingly powerful. Once you grow up from having one static page into having a large number of pages in a dynamic web application, you need conventions on how to organize your code.</p>
<p>In my opinion, there are two parts to the problem:</p>
<p><ol>
    <li>the easy part, which is to apply JS programming patterns</li>
    <li>the hard part, which is doing so in a consistent and maintainable manner</li>
</ol></p>
<p><h3>The easy part: Namespaces, modules and commenting conventions</h3>
<strong>Namespace and module pattern</strong></p>
<p>Javascript has no explicit syntax for advanced language features such as namespaces and private variables, but these can be implemented using very simple programming patterns.</p>
<p>A lot has been written on the namespace and module pattern, so I will only illustrate it here.</p>
<p>I like to add a &quot;placeholder&quot; function shown below to prevent me from making errors while modifying the module (<a href="http://blog.mixu.net/2009/05/internet-explorer-and-javascript-code/">IE6 freaks out</a> if there is a comma after the last item). This used to happen when I moved or added the methods and forgot to check whether that the commas are correct.</p>
<p>The example code below is adopted from (<a href="http://yuiblog.com/blog/2007/06/12/module-pattern/">http://yuiblog.com/blog/2007/06/12/module-pattern/</a>):</p>
<pre lang="Javascript"></pre>

<pre class="hljs"><code><span class="hljs-comment">// create a namespace</span>
YAHOO.<span class="hljs-keyword">namespace</span>(<span class="hljs-string">&quot;myProject&quot;</span>);
<span class="hljs-comment">// Assign the return value of an anonymous function to the namespace</span>
<span class="hljs-comment">/<strong> @namespace */</span>
YAHOO.myProject.myModule = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">/</strong> @private <em>/</span>
    <span class="hljs-keyword">var</span> myPrivateVar = <span class="hljs-string">&quot;I can be accessed only from within YAHOO.myProject.myModule.&quot;</span>;

    <span class="hljs-comment">/** @private </em>/</span>
    <span class="hljs-keyword">var</span> myPrivateMethod = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
        YAHOO.log(<span class="hljs-string">&quot;I can be accessed only from within YAHOO.myProject.myModule&quot;</span>);
    }

        <span class="hljs-comment">/<strong> @scope YAHOO.myProject.myModule */</span>
    <span class="hljs-keyword">return</span>  {
        <span class="hljs-comment">/</strong> describe myPublicProperty here <em>/</span>
        myPublicProperty: <span class="hljs-string">&quot;I&#39;m accessible as YAHOO.myProject.myModule.myPublicProperty.&quot;</span>
        <span class="hljs-comment">/** describe myPublicMethod here </em>/</span>
        myPublicMethod: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
            YAHOO.log(<span class="hljs-string">&quot;I&#39;m accessible as YAHOO.myProject.myModule.myPublicMethod.&quot;</span>);

            <span class="hljs-comment">//Within myProject, I can access &quot;private&quot; vars and methods:</span>
            YAHOO.log(myPrivateVar);
            YAHOO.log(myPrivateMethod());

            <span class="hljs-comment">//The native scope of myPublicMethod is myProject; we can</span>
            <span class="hljs-comment">//access public members using &quot;this&quot;:</span>
            YAHOO.log(<span class="hljs-keyword">this</span>.myPublicProperty);
        },
        <span class="hljs-comment">/<em>*
        </em> A placeholder function to prevent errors due to not having a comma after the last function in the return statement for this module.
        */</span>
        placeholder: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{}
};

}(); <span class="hljs-comment">// the parens here cause the anonymous function to execute and return</span></code></pre><p><strong>Commenting conventions.</strong> Pick a commenting tool and stick with it. Comment the intent of the code and any gotchas as well as the expected arguments and purpose of methods.</p>
<p>The two main JavaScript commenting tools are: <a href="http://code.google.com/p/jsdoc-toolkit/">JsDoc-Toolkit</a> (self-contained Java) and <a href="http://developer.yahoo.com/yui/yuidoc/">YuiDoc</a> (Python).</p>
<p><strong>File names and splitting code into files.</strong> Put all the hard-to-reuse code into its own namespace (ex. Framework. ModuleName. ModulePart.ApplicationName) in a separate file (application.js or custom.js). This way you keep the library clean of any application-specific stuff. It is often hard to avoid implementing some things in a one-off manner, so you might as well organize all the single-use stuff in its own file.</p>
<p>That is, if writing your own extensions to an existing framework, you will most likely have:</p>
<p><ol>
    <li>code that is fully reusable (specialized or pre-configured widgets, utilities etc.)</li>
    <li>code that is hard or pointless to reuse (page- or application-specific messages, formatting and utilities)</li>
</ol></p>
<p><h3>The hard part: structuring code for reuse, logical naming conventions</h3>
<strong>Structuring code for reuse</strong>. Encourage reuse by splitting code into configuration, implementation and customization.</p>
<p><ol>
    <li><strong>Configuration</strong> is anything that might need to change on each instantiation of your widget. It should be single section within a module (a private object in JSON notation). Make sure you have good and documented defaults, because this makes it easier to use the code again.</li>
    <li><strong>Implementation </strong> is the main code. It should NEVER contain hardcoded ID&#39;s, messages or other things that will eventually need to be overridden.</li>
    <li><strong>Customization </strong>is a set of page-specific blocks of code that alter the configuration. You only override the few things that are needed for the specific functionality on the page.</li>
</ol>
Here is an example (from <a href="http://www.wait-till-i.com/2008/05/23/script-configuration/">http://www.wait-till-i.com/2008/05/23/script-configuration/</a>):</p>
<pre class="hljs"><code>myProject.myModule = function(){
<span class="hljs-comment">// CONFIGURATION</span>
  var config = {
<span class="hljs-label">    CSS:</span>{
<span class="hljs-label">     classes:</span>{
<span class="hljs-label">       hover:</span><span class="hljs-string">&#39;hover&#39;</span>,
<span class="hljs-label">       active:</span><span class="hljs-string">&#39;current&#39;</span>,
<span class="hljs-label">       jsEnabled:</span><span class="hljs-string">&#39;js&#39;</span>
     },
<span class="hljs-label">     ids:</span>{
<span class="hljs-label">       container:</span><span class="hljs-string">&#39;maincontainer&#39;</span>
     }
    },
<span class="hljs-label">    timeout:</span><span class="hljs-number">2000</span>,
<span class="hljs-label">    userID:</span><span class="hljs-string">&#39;chrisheilmann&#39;</span>
  };

  <span class="hljs-comment">// IMPLEMENTATION</span>
  function init(){ };
  <span class="hljs-comment">// make init and config public</span>
  <span class="hljs-keyword">return</span> {
<span class="hljs-label">    init:</span>init,
<span class="hljs-label">    config:</span>config
  };
}();

<span class="hljs-comment">// CUSTOMIZATION</span>
<span class="hljs-comment">// This makes it possible to override stuff before calling init</span>
module.config.CSS.ids.container = <span class="hljs-string">&#39;header&#39;</span>;
module.config.userID = <span class="hljs-string">&#39;alanwhite&#39;</span>;
module.init();</code></pre><p><strong>Naming conventions.</strong> I don&#39;t mean deciding whether or not to use camelCase, but rather how the logical organization names of variables and widgets should be done. It is reasonably simple to stop using global variables and functions to avoid name conflicts, but what is harder is to come up with a logical naming convention that allows any code to be reused anywhere.</p>
<p>In particular, when you create new widgets, you often need to be able to connect them to one another in some manner. Being able to identifying the type (class) and retrieve/replace data from a new widget using a standard interface takes some planning and a lot of discipline, but it makes reusing the widgets much easier.</p>
<p><strong>ID and name attribute naming convention.</strong> I use &quot;data[widgetName][recordIndex][fieldName]&quot; for input names (because PHP will parse this into arrays automatically) and &quot;widgetName_fieldName_recordIndex&quot; for ID attributes (because it makes string comparisons easier).</p>
<p><strong>Widget instance naming convention. </strong>I use YAHOO.ApplicationName.WidgetInstanceName for widget instances, and use WidgetInstanceName to create any related tags with IDs.</p>
<p>I am still looking for a good logical naming convention for widgets, but it seems this topic is not as commonly discussed. If you have any tips, please leave a comment!</p>
<p><strong>Reference stuff</strong></p>
<p><a href="http://stackoverflow.com/questions/211795/are-there-any-coding-standards-for-javascript">http://stackoverflow.com/questions/211795/are-there-any-coding-standards-for-javascript</a></p>
<p><a href="http://ajaxian.com/archives/maintainable-javascript-videos-are-now-available">http://ajaxian.com/archives/maintainable-javascript-videos-are-now-available</a></p>
<p><a href="http://yuiblog.com/blog/2007/06/12/module-pattern/">http://yuiblog.com/blog/2007/06/12/module-pattern/</a></p>
<p><a href="http://www.wait-till-i.com/2008/05/23/script-configuration/">http://www.wait-till-i.com/2008/05/23/script-configuration/</a></p>

    		</section>
    		<footer class="post-footer">
    			<div itemscope itemprop="author" itemtype="http://schema.org/Person" class="post-author">
	                	<img itemprop="image" src="http://www.gravatar.com/avatar/F0AF2953911805542C66FD43B2F8FC38?s=155" alt="Mixu" class="post-author-avatar">
					<div class="post-author-info">
		              	<span itemprop="name">Mixu</span>
		              	<p itemprop="description" class="post-author-bio">Node.js developer</p>
	              	</div>
    			</div>
    		</footer>
		</article>
		
		<section itemprop="comment" class="post-comments">
			<div id="disqus_thread"></div>
			<script type="text/javascript">            
				var disqus_shortname = 'example';
		
			    (function() {
			        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
			        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
			        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
			    })();
			</script>
			<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
			<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
		</section>	</section>

	<footer class="footer" role="contentinfo">
		<div class="social-links-line"></div>
		<section class="social-links">
	        <div class="social-links-inner">
	        	<a class="icon icon-feed" href="http://localhost:5000/rss/" target="_blank">
	        		<i class="fa fa-rss"></i>
	        	</a>
	        	
	        	<a class="icon icon-twitter" href="http://twitter.com/" target="_blank">				
	        		<i class="fa fa-twitter"></i>
	        	</a>
	        	
	        	<a class="icon icon-facebook" href="http://facebook.com/" target="_blank">
	        		<i class="fa fa-facebook"></i>
	        	</a>
	        	
	        	<a class="icon icon-google-plus" href="http://plus.google.com/" target="_blank">
	        		<i class="fa fa-google-plus"></i>
	        	</a>
	        	
	        	<a class="icon icon-dribbble" href="http://dribbble.com/" target="_blank">
	        		<i class="fa fa-dribbble"></i>
	        	</a>
	        	
	        	<a class="icon icon-flickr" href="http://flickr.com/" target="_blank">
	        		<i class="fa fa-flickr"></i>
	        	</a>
	        	
	        	<a class="icon icon-foursquare" href="http://foursquare.com/" target="_blank">
	        		<i class="fa fa-foursquare"></i>
	        	</a>
	        	
	        	<a class="icon icon-instagram" href="http://instagram.com/" target="_blank">
	        		<i class="fa fa-instagram"></i>
	        	</a>
	        	
	        	<a class="icon icon-github" href="http://github.com/" target="_blank">
	        		<i class="fa fa-github"></i>
	        	</a>
	        	
	        	<a class="icon icon-tumblr" href="http://tumblr.com/" target="_blank">
	        		<i class="fa fa-tumblr"></i>
	        	</a>
	        	
	        	<a class="icon icon-pinterest" href="http://pinterest.com/" target="_blank">
	        		<i class="fa fa-pinterest"></i>
	        	</a>
	        	
	        	<a class="icon icon-linkedin" href="http://linkedin.com/" target="_blank">
	        		<i class="fa fa-linkedin"></i>
	        	</a>
	        	
	        	<a class="icon icon-vk" href="http://vk.com/" target="_blank">
	        		<i class="fa fa-vk"></i>
	        	</a>        </div>               
	    </section>
	</footer></main>

	<script src="/assets/js/jquery.min.js"></script>
    <script type="text/javascript" src="/assets/js/main.min.js"></script>
</body>
</html>