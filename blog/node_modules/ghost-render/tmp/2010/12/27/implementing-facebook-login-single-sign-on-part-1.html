<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>Implementing Facebook login / single sign-on (part 1)</title>	

	<meta name="description" content="">
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Implementing Facebook login / single sign-on (part 1)">
    <meta name="twitter:description" content="">
    <meta name="twitter:site" content="@username">
	<meta name="twitter:creator" content="@username">

    <meta property="og:type" content="article">
    <meta property="og:title" content="Implementing Facebook login / single sign-on (part 1)">
    <meta property="og:description" content="">

    <link rel="stylesheet" href="/assets/css/style.css">

    <meta name="generator" content="Ghost ?" />
<link rel="alternate" type="application/rss+xml" title="Mixu&#39;s blog" href="/rss/">
<link rel="canonical" href="http://localhost:5000//2010/12/27/implementing-facebook-login-single-sign-on-part-1.md" />	
</head>
<body class="post-template">
	
<main id="container" role="main">
	<header class="header" role="banner" style="background-image: url(/assets/img/header.jpg);">
		<h1 class="blog-title">
			<a href="http://localhost:5000">Mixu&#x27;s blog</a>
		</h1>
		<div class="blog-description">A blog</div>
	</header>
	<nav class="menu" role="navigation">
		<a href="#">Home</a>
		<span class="delimiter">&#8226;</span>
		<a href="#">About</a>
		<span class="delimiter">&#8226;</span>
		<a href="#">Contacts</a>
	</nav>
	<section class="post-full">
		<article itemscope itemtype="http://schema.org/BlogPosting" role="article" class="post">
			<header class="post-header">        		
    			<h2 itemprop="name headline" class="post-title">
    				<a href="/2010/12/27/implementing-facebook-login-single-sign-on-part-1.html" itemprop="url">Implementing Facebook login / single sign-on (part 1)</a>
    			</h2>
    			<div class="post-meta">
        			<time datetime="2010-12-27" itemprop="datePublished">December 27, 2010</time>
        		</div>
        		<hr>
    		</header>
    		<section itemprop="articleBody" class="post-content">
    			<p>I am implementing Facebook single sign on for my applications. In this first part of my Facebook authentication tutorial, I discuss the basics of the Facebook authentication process (see also: <a href="http://blog.mixu.net/2011/01/03/implementing-facebook-login-part-2/">part 2</a>, <a href="http://blog.mixu.net/2011/01/09/implementing-facebook-login-part-3/">part 3</a>).</p>
<p><h2>Getting started: some terminology</h2>
If you are like me and haven&#39;t implemented Facebook integration before, the terminology and various API&#39;s can be confusing. And the Facebook developer documentation is a combination of too-much-information and not-enough-explanation.</p>
<p>First, the Facebook documentation talks about different kinds of applications, which are:</p>
<ul>
    <li><strong>Facebook canvas applications</strong>: Applications-within-Facebook, or what users think of as &quot;Facebook apps&quot;.
<ul>
    <li>FBML / FBJS apps (built using FB-specific markup)</li>
    <li>Iframe canvas apps (built using Javascript and the FB JS API)</li>
</ul>
</li>
    <li><strong>Facebook desktop applications</strong> (rare; basically anything that cannot run within a browser, like a desktop client for Facebook)</li>
    <li><strong>Facebook web applications</strong> (websites with Facebook-integration such as single sign-on and custom Facebook elements within them such as CNN and Digg)</li>
</ul>
And there are multiple developer tools that Facebook offers:
<ul>
    <li><strong>Facebook Connect</strong> - no such thing exists anymore (e.g. <a href="http://mashable.com/2010/04/21/facebook-kills-facebook-connect/">http://mashable.com/2010/04/21/facebook-kills-facebook-connect/</a>). The new API is called the Graph API, and talking about Facebook Connect is inaccurate..</li>
    <li><strong>APIs</strong> (always used, either on the server side or on the client&#39;s web browser via Javascript)
<ul>
    <li><strong>Graph API</strong>: The new version of Facebook&#39;s API. The Graph API is much more than just authentication: it is the mechanism which powers Facebook applications and allows you to read and write date to Facebook.</li>
    <li><strong>Old REST API</strong>: The early version of Facebook&#39;s Graph API; Facebook does not recommend you use it because they are in the process of deprecating it.</li>
    <li><strong>FQL</strong> (Facebook Query Language): A SQL-like language for querying the Graph API. Supposedly makes using the API easier for apps.</li>
</ul>
</li>
    <li><strong>Markup </strong>
<ul>
    <li><strong>FBML</strong> (Facebook Markup Language): A HTML-like language for building Facebook applications. FBML is rendered on the Facebook server. Facebook does not recommend that you use it; instead suggesting that you use the Graph API via their Javascript SDK with XFBML.</li>
    <li><strong>XFBML</strong>: FBML-within-(X)HTML pages rendered using Facebook&#39;s Javascript SDK.</li>
</ul>
</li>
    <li><strong>SDKs </strong>
<ul>
    <li>Language-specific libraries for querying the API. Other than the Javascript SDK, it&#39;s all server-side and based on HTTP requests.</li>
    <li>Note that the Javascript SDK allows you to render XFBML embedded on a (X)HTML page! This was confusing because I had done something with FBML before, and didn&#39;t see where exactly the transformation from fb:login-button to HTML was occurring...</li>
</ul>
</li>
    <li><strong>Other stuff from Facebook: </strong>
<ul>
    <li><strong>Open Graph Protocol</strong>: A convention of meta and other tags which allows you to add metadata to Like button clicks, integrating them with Facebook (e.g. a like on a profile).</li>
    <li><strong>Social plugins</strong>: Ready-made Facebook widgets you can embed using an iframe.</li>
</ul>
</li>
</ul>
<h2>How does Facebook authentication work?</h2>
Conceptually, it works like this (picture of user represents page shown to user):

<a href="http://blog.mixu.net/files/2010/12/facebook.png"><img class="alignnone size-full wp-image-1446" title="facebook" src="http://blog.mixu.net/files/2010/12/facebook.png" alt="" width="471" height="581" /></a>

There most important authentication methods are:
<ol>
    <li><strong>Javascript single sign-on</strong>: The Javascript single sign-on is simplest, because it provides a function (FB.login) which handles everything from the details of OAuth 2.0 requests to rendering the actual login button. When using the Javascript API, the user id and access token are stored in a cookie (e.g. fbs_app_id) which you can access both server-side and via Javascript in the client.</li>
    <li><strong>web application authentication (using server side SDK&#39;s)</strong>: When you do web application authentication, you need redirect the user to Facebook in your app. When the user allows access for your app, Facebook redirects them back and sends the access token and user ID as part of the GET request to your authentication-complete redirection page. Then you can access the user&#39;s information using the returned token.</li>
</ol>
<h2>Next part</h2>
<a href="http://blog.mixu.net/2011/01/03/implementing-facebook-login-part-2/">In part 2 of my Facebook login tutorial</a> I address database design considerations and look at how Facebook login can be integrated with your existing user management.

<a href="http://blog.mixu.net/2011/01/09/implementing-facebook-login-part-3/">In part 3 of my Facebook login tutorial</a> I go into implementation specifics using the Javascript SDK.

<strong>References</strong>
<ul>
    <li><a href="http://developers.facebook.com/docs/">http://developers.facebook.com/docs/</a></li>
    <li><a href="http://developers.facebook.com/docs/guides/performance">http://developers.facebook.com/docs/guides/performance</a> (good illustration on the difference between FBML and IFrame applications)</li>
    <li><a href="http://stackoverflow.com/questions/1175047/facebook-app-vs-facebook-connect-site">http://stackoverflow.com/questions/1175047/facebook-app-vs-facebook-connect-site</a></li>
</ul>

<h2 id="comments">Comments</h2>
<p><strong><a href="#274" title="2011-01-02 08:28:25">Alex</a>:</strong> Thanks for creating this.  I am also confused about the ever-changing technologies FB is using.  I wish they made it simpler.  Your post helped me understand a bunch of different nuances. :)</p>
<p><strong><a href="#275" title="2011-01-08 23:15:55">Grant</a>:</strong> Thank you.  It&#39;s often only in seeing all of the pieces side by side that we understand.  I hadn&#39;t found something so clear and comprehensive as your post.</p>
<p><strong><a href="#676" title="2013-04-23 15:25:29">don11</a>:</strong> thanks. if the user logged out and or the cookies cleared. the access token will became invalid. what is the best way to handle that</p>

    		</section>
    		<footer class="post-footer">
    			<div itemscope itemprop="author" itemtype="http://schema.org/Person" class="post-author">
	                	<img itemprop="image" src="http://www.gravatar.com/avatar/F0AF2953911805542C66FD43B2F8FC38?s=155" alt="Mixu" class="post-author-avatar">
					<div class="post-author-info">
		              	<span itemprop="name">Mixu</span>
		              	<p itemprop="description" class="post-author-bio">Node.js developer</p>
	              	</div>
    			</div>
    		</footer>
		</article>
		
		<section itemprop="comment" class="post-comments">
			<div id="disqus_thread"></div>
			<script type="text/javascript">            
				var disqus_shortname = 'example';
		
			    (function() {
			        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
			        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
			        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
			    })();
			</script>
			<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
			<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
		</section>	</section>

	<footer class="footer" role="contentinfo">
		<div class="social-links-line"></div>
		<section class="social-links">
	        <div class="social-links-inner">
	        	<a class="icon icon-feed" href="http://localhost:5000/rss/" target="_blank">
	        		<i class="fa fa-rss"></i>
	        	</a>
	        	
	        	<a class="icon icon-twitter" href="http://twitter.com/" target="_blank">				
	        		<i class="fa fa-twitter"></i>
	        	</a>
	        	
	        	<a class="icon icon-facebook" href="http://facebook.com/" target="_blank">
	        		<i class="fa fa-facebook"></i>
	        	</a>
	        	
	        	<a class="icon icon-google-plus" href="http://plus.google.com/" target="_blank">
	        		<i class="fa fa-google-plus"></i>
	        	</a>
	        	
	        	<a class="icon icon-dribbble" href="http://dribbble.com/" target="_blank">
	        		<i class="fa fa-dribbble"></i>
	        	</a>
	        	
	        	<a class="icon icon-flickr" href="http://flickr.com/" target="_blank">
	        		<i class="fa fa-flickr"></i>
	        	</a>
	        	
	        	<a class="icon icon-foursquare" href="http://foursquare.com/" target="_blank">
	        		<i class="fa fa-foursquare"></i>
	        	</a>
	        	
	        	<a class="icon icon-instagram" href="http://instagram.com/" target="_blank">
	        		<i class="fa fa-instagram"></i>
	        	</a>
	        	
	        	<a class="icon icon-github" href="http://github.com/" target="_blank">
	        		<i class="fa fa-github"></i>
	        	</a>
	        	
	        	<a class="icon icon-tumblr" href="http://tumblr.com/" target="_blank">
	        		<i class="fa fa-tumblr"></i>
	        	</a>
	        	
	        	<a class="icon icon-pinterest" href="http://pinterest.com/" target="_blank">
	        		<i class="fa fa-pinterest"></i>
	        	</a>
	        	
	        	<a class="icon icon-linkedin" href="http://linkedin.com/" target="_blank">
	        		<i class="fa fa-linkedin"></i>
	        	</a>
	        	
	        	<a class="icon icon-vk" href="http://vk.com/" target="_blank">
	        		<i class="fa fa-vk"></i>
	        	</a>        </div>               
	    </section>
	</footer></main>

	<script src="/assets/js/jquery.min.js"></script>
    <script type="text/javascript" src="/assets/js/main.min.js"></script>
</body>
</html>