<?xml version="1.0" encoding="UTF-8"?>
<rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Mixu - Mixu's blog]]></title><description><![CDATA[A blog]]></description><link>http://localhost:5000/</link><generator>Ghost</generator><lastBuildDate>Mon, 06 Oct 2014 00:15:41 GMT</lastBuildDate><atom:link href="http://localhost:5000/author/foo/rss/" rel="self" type="application/rss+xml"/><ttl>60</ttl><item><title><![CDATA[Kohana3: automatically collect internationalization strings]]></title><description><![CDATA[<p>I started implementing i18n for my upcoming KO3 application, and implemented a quick patch so that I don&#39;t need to manually find and type translation strings.</p>
<p><strong>What this code does</strong></p>
<p>What the code below does is it checks whether the translation string exists, if not then it saves it into the translation file with the English equivalent. This updated version of the translation string file is saved into /application/i18n/languagename.php, and the old file is saved with a new name containing the current date and time.</p>
<p>Hope this helps!</p>
<p><strong>How to set it up</strong></p>
<p>First set the language using i18n::lang(&#39;xy-xx&#39;) in bootstrap.php.</p>
<p>Also, add the following as the last line in bootstrap.php:</p>
<p><pre lang="php">// Write the updated language file, if necessary
i18n::write();</pre>
Finally, add the file <strong>/application/classes/i18n.php</strong> which overrides i18n::get():</p>
<pre class="hljs"><code><span class="hljs-comment">/<strong>
 <em> A patch for the Internationalization (i18n) class.
 </em>
 <em><span class="hljs-phpdoc"> @package</span>    I18n
 </em><span class="hljs-phpdoc"> @author</span> Mikito Takada
 */</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">I18n</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Kohana_I18n</span> </span>{
    <span class="hljs-comment">// Cache of missing strings</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">static</span> <span class="hljs-variable">$_cache_missing</span> = <span class="hljs-keyword">array</span>();

    <span class="hljs-comment">/</strong>
     <em> Returns translation of a string. If no translation exists, the original
     </em> string will be returned. No parameters are replaced.
     <em>
     </em>     $hello = I18n::get(&#39;Hello friends, my name is :name&#39;);
     <em>
     </em><span class="hljs-phpdoc"> @param</span>   string   text to translate
     <em><span class="hljs-phpdoc"> @param</span>   string   target language
     </em><span class="hljs-phpdoc"> @return</span>  string
     <em>/</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get</span><span class="hljs-params">(<span class="hljs-variable">$string</span>, <span class="hljs-variable">$lang</span> = NULL)</span>
    </span>{
        <span class="hljs-keyword">if</span> ( ! <span class="hljs-variable">$lang</span>)
        {
            <span class="hljs-comment">// Use the global target language</span>
            <span class="hljs-variable">$lang</span> = I18n::<span class="hljs-variable">$lang</span>;
        }

        <span class="hljs-comment">// Load the translation table for this language</span>
        <span class="hljs-variable">$table</span> = I18n::load(<span class="hljs-variable">$lang</span>);

        <span class="hljs-comment">// Return the translated string if it exists</span>
      <span class="hljs-keyword">if</span>(<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$table</span>[<span class="hljs-variable">$string</span>]))
      {
         <span class="hljs-keyword">return</span> <span class="hljs-variable">$table</span>[<span class="hljs-variable">$string</span>];
      } <span class="hljs-keyword">else</span> {
         <span class="hljs-comment">// Translated string does not exist</span>
         <span class="hljs-comment">// Store the original string as missing - still makes sense to store the English string so that loading the untranslated file will work.</span>
         I18n::<span class="hljs-variable">$_cache_missing</span>[<span class="hljs-variable">$lang</span>][<span class="hljs-variable">$string</span>] = <span class="hljs-variable">$string</span>;
         <span class="hljs-keyword">return</span> <span class="hljs-variable">$string</span>;
      }
    }

   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">write</span><span class="hljs-params">()</span>
   </span>{
      <span class="hljs-comment">// something new must be added for anything to happen</span>
      <span class="hljs-keyword">if</span>(!<span class="hljs-keyword">empty</span>(I18n::<span class="hljs-variable">$_cache_missing</span>)) {
         <span class="hljs-variable">$contents</span> = <span class="hljs-string">&#39;&amp;lt;?php defined(&#39;</span>SYSPATH<span class="hljs-string">&#39;) or die(&#39;</span>No direct script access.<span class="hljs-string">&#39;);
/**
 </em> Translation file in language: &#39;</span>.I18n::<span class="hljs-variable">$lang</span>.<span class="hljs-string">&#39;
 <em> Automatically generated from previous translation file.
 </em>/
return &#39;</span>.var<em>export(array_merge(I18n::<span class="hljs-variable">$_cache_missing</span>[I18n::<span class="hljs-variable">$lang</span>], I18n::<span class="hljs-variable">$_cache</span>[I18n::<span class="hljs-variable">$lang</span>]), <span class="hljs-keyword">true</span>).<span class="hljs-string">&#39;;&#39;</span>;

         <span class="hljs-comment">// save string to file</span>
         <span class="hljs-variable">$savepath</span> = APPPATH.<span class="hljs-string">&#39;/i18n/&#39;</span>;
         <span class="hljs-variable">$filename</span> = I18n::<span class="hljs-variable">$lang</span>.<span class="hljs-string">&#39;.php&#39;</span>;
         <span class="hljs-comment">// check that the path exists</span>
         <span class="hljs-keyword">if</span>(!file_exists(<span class="hljs-variable">$savepath</span>)) {
            <span class="hljs-comment">// if not, create directory</span>
            mkdir(<span class="hljs-variable">$savepath</span>, <span class="hljs-number">0777</span>, <span class="hljs-keyword">true</span>);
         }
         <span class="hljs-comment">// rename the old file - if the file size is different.</span>
         <span class="hljs-keyword">if</span>(file_exists(<span class="hljs-variable">$savepath</span>.<span class="hljs-variable">$filename</span>) &amp;amp;&amp;amp; ( filesize(<span class="hljs-variable">$savepath</span>.<span class="hljs-variable">$filename</span>) != strlen(<span class="hljs-variable">$contents</span>) ) ) {
            <span class="hljs-variable">$result</span> = rename(<span class="hljs-variable">$savepath</span>.<span class="hljs-variable">$filename</span>, <span class="hljs-variable">$savepath</span>.I18n::<span class="hljs-variable">$lang</span>.<span class="hljs-string">&#39;</em>&#39;</span>.date(<span class="hljs-string">&#39;Y_m_d_H_i_s&#39;</span>).<span class="hljs-string">&#39;.php&#39;</span>);
            <span class="hljs-keyword">if</span>(!<span class="hljs-variable">$result</span>) {
               <span class="hljs-comment">// Rename failed! Don&#39;t write the file.</span>
               <span class="hljs-keyword">return</span>;
            }
         }
         <span class="hljs-comment">// save the file</span>
         file_put_contents(<span class="hljs-variable">$savepath</span>.<span class="hljs-variable">$filename</span>, <span class="hljs-variable">$contents</span>);
      }
   }
}</code></pre><p><strong>Caveats and notes</strong></p>
<p>There are two things that have to be taken into account:</p>
<ul>
    <li>First, this is would obviously be inefficient for a production site, since actual files are being rewritten on each request that finds new translation strings.</li>
    <li>Why this is not a problem: My recommendation is that you shouldn&#39;t run this code in production mode, since there is no point and it is very easy to remove the code after developement is completed.</li>
    <li>Second, this approach is less comprehensive than using something like the gettext tools that are available - those tools scan all of the source code, while my approach depends on run-time detection of new strings. This means that a small percentage of strings will not be found automatically (ex. rare errors that never get triggered).</li>
    <li>Why this is not a problem: This approach will still get the vast majority of the strings without requiring any manual hunting for strings, so I think it&#39;ll save you quite a bit of time.</li>
</ul>

<h2 id="comments">Comments</h2>
<p><strong><a href="#224" title="2010-12-10 04:34:48">Beto</a>:</strong> Hello,</p>
<p>I took the liberty to organize their class within a module, so I believe that is easier to reuse.</p>
<p>Of course, I kept developing the credits, I made only a small modification that I found interesting to make it more readable.</p>
<p>On my blog (Brazilian Portuguese) I wrote a bit more of a module called i18n-files.</p>
<p><a href="http://beto.euqueroserummacaco.com/blog/kohana-modulo-i18n-files-traduzinho-seu-software-de-maneira-simples/">http://beto.euqueroserummacaco.com/blog/kohana-modulo-i18n-files-traduzinho-seu-software-de-maneira-simples/</a></p>
<p>I hope this does not leave angry.</p>
<p><strong><a href="#225" title="2010-12-10 12:38:20">Mikito Takada</a>:</strong> Hi Beto,</p>
<p>Good to hear that you found it useful, thanks for your blog post! I had a look at it via Google Translate...</p>
<p><strong><a href="#226" title="2011-05-20 16:45:08">Beto</a>:</strong> Hello Mikito,</p>
<p>After all this time returned to his post to clarify some doubts. Your article is very good!</p>
<p>About the google translator .... he is really good is not it? Always saves me when I do not understand the text written in other languages.</p>
<p><strong><a href="#227" title="2011-10-29 15:45:00">Ando</a>:</strong> Hey,</p>
<p>I can&#39;t seem to overload the Kohana i18n class, specifically.</p>
<p>Kohana seems to load the system&#39;s i18n and leave my classes/i18n.php untouced.</p>
<p>The filenames/ locations / class i18n extends Kohana_I18n all seem ok.</p>
<p>When manually require-ing the file:
PHP Fatal error:  Cannot redeclare class I18n in  ...</p>
<p>Any ideas?</p>
<p><strong><a href="#229" title="2012-01-31 12:55:04">Nuno</a>:</strong> nice man. thanks</p>
<p><strong><a href="#574" title="2012-08-09 15:04:33">jaydublu</a>:</strong> I found that just adding I18n::write() into bootstrap.php didn&#39;t work - it was run before any new strings were collected.</p>
<p>But, looking at Beto&#39;s module I spotted that register_shutdown_function(array(&#39;I18n&#39;, &#39;write&#39;));
 is a way that will work.</p>
]]></description><link>http://localhost:5000undefined</link><guid isPermaLink="true">http://localhost:5000undefined</guid><dc:creator><![CDATA[Mixu]]></dc:creator><pubDate>Wed, 02 Jun 2010 07:00:00 GMT</pubDate></item><item><title><![CDATA[Wordpress 3.0 multi-site multi-domain problems with solutions]]></title><description><![CDATA[<p>Here are some problems I ran into when setting up Wordpress 3.0 with multiple different domains, along with how I solved them. I figured it&#39;s better to get them out on the blog now, and update this post if/when I have more solutions.</p>
<h3>Problem 1: I can&#39;t load page URLs except when using ?p=xyz permalinks</h3>
If you are having problems with page URLs not working on multisite domains, make sure you have:
<pre lang="apache">    AllowOverride FileInfo Options</pre>
defined in your httpd.conf for the directory the Virtual host is in.
<h3>Problem 2: The new themes I installed and activated on the main WP 3.0 site do not show up on separate domains</h3>
The permissions for separate domains do not get automatically updated when you activate themes on the main site.

In MySQL, copy the value for &quot;allowedthemes&quot; in the wp_sitemeta table. This will enable themes on separate domains. Example:
<pre lang="sql">INSERT INTO <code>wordpress_database</code>.<code>wp_sitemeta</code> (<code>meta_id</code>, <code>site_id</code>, <code>meta_key</code>, <code>meta_value</code>) VALUES (NULL, &#39;2&#39;, &#39;allowedthemes&#39;, &#39;a:2:{s:9:&quot;it-oikeus&quot;;b:1;s:9:&quot;twentyten&quot;;b:1;}&#39;);</pre>
where the site_id is the site ID for the separate domain, and meta_value is copied from the first site.
<h3>Problem 3: I cannot access Plugins on separate domains</h3>
In MySQL, copy the value for &quot;menu_items&quot; in the wp_sitemeta table. This will enable plugins on separate domains. Example:
<pre lang="sql">INSERT INTO <code>wordpress_database</code>.<code>wp_sitemeta</code> (<code>meta_id</code>, <code>site_id</code>, <code>meta_key</code>, <code>meta_value</code>) VALUES (NULL, &#39;2&#39;, &#39;menu_items&#39;, &#39;a:1:{s:7:&quot;plugins&quot;;s:1:&quot;1&quot;;}&#39;);</pre>
where the site_id is the site ID for the separate domain, and menu_items is copied from the first site.
<h3>Problem 4: New users are not visible on separate domains</h3>
in wp_usermeta, set:

wp_2_capabilities = a:1:{s:13:&quot;administrator&quot;;s:1:&quot;1&quot;;}
wp_2_user_level = 10

<h3>(NEW June/2010) Problem 5: Upload files not working on separate domains</h3>

<p>Replace site_id (2) with your site id in the query below:</p>
<pre lang="sql">
INSERT INTO `wordpress_database`.`wp_sitemeta` (`meta_id`, `site_id`, `meta_key`, `meta_value`) VALUES (NULL, '2', 'upload_filetypes', 'jpg jpeg png gif midi mid aac ac3 aif aiff m3a m4a m4b mka mp1 mp2 mp3 ogg oga ram wav wma asf avi divx dv flv m4v mkv mov mp4 mpeg mpg mpv ogm ogv qt rm vob wmv doc docx docm dotm odt pages pdf rtf wp wpd numbers ods xls xlsx xlsb xlsm key ppt pptx pptm odp swf asc csv tsv txt bz2 cab dmg gz rar sea sit sqx tar tgz zip css htm html php js
');
</pre>

<h2 id="comments">Comments</h2>
<p><strong><a href="#217" title="2011-03-22 04:29:59">Kris</a>:</strong> Hey Mixu, thanks bro for the tip for allowing new install of wp theme for wpmu, i was looking everywhere, and while i was looking thru the db tables i saw the site meta field and then found your post, THANKS BRO!</p>
<p><strong><a href="#219" title="2011-08-24 01:53:03">John</a>:</strong> Thanks for sharing. I was searching for the &#39;plugins&#39; submenu all over :-)</p>
<p><strong><a href="#220" title="2012-01-29 18:55:53">webber</a>:</strong> Great post! After a couple of hours of trying to get it to work, I found your fix and is now working perfect</p>
]]></description><link>http://localhost:5000undefined</link><guid isPermaLink="true">http://localhost:5000undefined</guid><dc:creator><![CDATA[Mixu]]></dc:creator><pubDate>Mon, 31 May 2010 07:00:00 GMT</pubDate></item><item><title><![CDATA[Upgrading / moving Wordpress 2.9 installs to multisite WP 3.0]]></title><description><![CDATA[<p>In the <a href="http://blog.mixu.net/2010/05/17/setting-up-multisite-wordpress-3-0-with-multiple-different-domains/">previous blog</a> post I discussed <a href="http://blog.mixu.net/2010/05/17/setting-up-multisite-wordpress-3-0-with-multiple-different-domains/">how the multi-site functionality in WP 3.0 can be enabled</a> and how it can be hacked to use multiple different domains. Now, let&#39;s have a look at how you can migrate all of your old WP 2.9 sites under a single WP3.0 installation.</p>
<p>The basic steps are:</p>
<p><ol>
    <li>Move posts</li>
    <li>Move attached files</li>
    <li>Fix URLs in posts</li>
    <li>Move/recreate users</li>
</ol></p>
<p><h3>1. Moving the posts from WP 2.9 to 3.0</h3>
Moving the posts, links, comments and terms to WP 3.0 is quite easy. A table-by-table comparison shows that the main tables have identical structures (comparison between a 2.9.2 site and 3.0 beta 2). This means that we can use SQL for the migration. Alternatively, you could export and import (see the functionality under Tools -&gt; Export / Import).</p>
<p>In WP 3.0, the tables are sharded - each blog has it&#39;s own set of tables, and the id of the blog is used as a part of the table name: for example, wp_2_commentmeta is the wp_commentmeta table for the multisite blog with id=2. Find out what the blog_id for your blog is, and use it in the SQL queries below.</p>
<p>I performed the following queries, which move all the tables EXCEPT the options table. Moving the options table seems to result in a broken blog, since the themes, settings and plugins referenced by Wordpress will not exist in the new environment.</p>
<p><pre lang="sql">TRUNCATE newblog.wp_2_commentmeta;
INSERT INTO newblog.wp_2_commentmeta SELECT * FROM oldblog.wp_commentmeta;</p>
<p>TRUNCATE newblog.wp_2_comments;
INSERT INTO newblog.wp_2_comments SELECT * FROM oldblog.wp_comments;</p>
<p>TRUNCATE newblog.wp_2_links;
INSERT INTO newblog.wp_2_links SELECT * FROM oldblog.wp_links;</p>
<p>TRUNCATE newblog.wp_2_postmeta;
INSERT INTO newblog.wp_2_postmeta SELECT * FROM oldblog.wp_postmeta;</p>
<p>TRUNCATE newblog.wp_2_posts;
INSERT INTO newblog.wp_2_posts SELECT * FROM oldblog.wp_posts;</p>
<p>TRUNCATE newblog.wp_2_terms;
INSERT INTO newblog.wp_2_terms SELECT * FROM oldblog.wp_terms;</p>
<p>TRUNCATE newblog.wp_2_term_relationships;
INSERT INTO newblog.wp_2_term_relationships SELECT * FROM oldblog.wp_term_relationships;</p>
<p>TRUNCATE newblog.wp_2_term_taxonomy;
INSERT INTO newblog.wp_2_term_taxonomy SELECT * FROM oldblog.wp_term_taxonomy;</pre>
<strong>What if these queries fail?</strong></p>
<p>Some Wordpress plugins modify the default tables - which means there are extra fields that need to be ignored. If the INSERT INTO statements below don&#39;t work for you, you need to explicitly state the names of the source and destination fields instead of using *. This means losing the added fields, so you need to think about it on a case-by-case basis. See the MySQL docs for INSERT INTO ... SELECT syntax.</p>
<p><h3>2. Moving attached files</h3>
WP 3.0 uses a slightly different directory structure for multisite. The files for each blog are under blogs.dir/[blog_id]/, and use the same substructure as before. Hence, the new directory structure is like this:</p>
<pre class="hljs"><code>/wp-content/blogs.dir/[blog_id]/files/<span class="hljs-keyword">...</span></code></pre><p>and if you keep using the same structure (ex. &quot;year/month/filename&quot;) you can just copy the files:</p>
<pre class="hljs"><code><span class="hljs-built_in">mkdir</span> -<span class="hljs-keyword">p</span> ./<span class="hljs-keyword">wp</span>-content/blogs.dir/[blog_id]/<span class="hljs-keyword">files</span>/</code></pre><pre class="hljs"><code>cp -R .<span class="hljs-regexp">/oldblog/</span>wp-content<span class="hljs-regexp">/uploads/</span>* .<span class="hljs-regexp">/newblog/</span>wp-content<span class="hljs-regexp">/blogs.dir/</span>[blog_id]<span class="hljs-regexp">/files/</span></code></pre><p><h3>3. Fixing URLs in posts</h3>
Try loading a post with images. The URLs (may) change from:
<a href="http://blog.domain.com/wp-content/uploads/2010/04/image.png">http://blog.domain.com/wp-content/uploads/2010/04/image.png</a>
to:
<a href="http://blog.domain.com/files/2010/04/image.png">http://blog.domain.com/files/2010/04/image.png</a></p>
<p>You can fix this by performing a replace on the wp_[blog_id]_posts table:</p>
<p><pre lang="sql">UPDATE wp_2_posts SET guid = replace(guid, &quot;<a href="http://oldblog.domain.com/wp-content/uploads">http://oldblog.domain.com/wp-content/uploads</a>&quot;, &quot;<a href="http://blog.domain.com/files">http://blog.domain.com/files</a>&quot;);
UPDATE wp_2_posts SET post_content_filtered = replace(post_content_filtered, &quot;<a href="http://oldblog.domain.com/wp-content/uploads">http://oldblog.domain.com/wp-content/uploads</a>&quot;, &quot;<a href="http://blog.domain.com/files">http://blog.domain.com/files</a>&quot;);
UPDATE wp_2_posts SET pinged = replace(pinged, &quot;<a href="http://oldblog.domain.com/wp-content/uploads">http://oldblog.domain.com/wp-content/uploads</a>&quot;, &quot;<a href="http://blog.domain.com/files">http://blog.domain.com/files</a>&quot;);
UPDATE wp_2_posts SET post_excerpt = replace(post_excerpt, &quot;<a href="http://oldblog.domain.com/wp-content/uploads">http://oldblog.domain.com/wp-content/uploads</a>&quot;, &quot;<a href="http://blog.domain.com/files">http://blog.domain.com/files</a>&quot;);
UPDATE wp_2_posts SET post_content = replace(post_content, &quot;<a href="http://oldblog.domain.com/wp-content/uploads">http://oldblog.domain.com/wp-content/uploads</a>&quot;, &quot;<a href="http://blog.domain.com/files">http://blog.domain.com/files</a>&quot;);</pre>
If you also changed the domain, you need to fix the links (do this after you fix the file upload paths):</p>
<p><pre lang="sql">UPDATE wp_2_posts SET guid = replace(guid, &quot;<a href="http://oldblog.domain.com">http://oldblog.domain.com</a>&quot;, &quot;<a href="http://blog.domain.com">http://blog.domain.com</a>&quot;);
UPDATE wp_2_posts SET post_content_filtered = replace(post_content_filtered, &quot;<a href="http://oldblog.domain.com">http://oldblog.domain.com</a>&quot;, &quot;<a href="http://blog.domain.com">http://blog.domain.com</a>&quot;);
UPDATE wp_2_posts SET pinged = replace(pinged, &quot;<a href="http://oldblog.domain.com">http://oldblog.domain.com</a>&quot;, &quot;<a href="http://blog.domain.com">http://blog.domain.com</a>&quot;);
UPDATE wp_2_posts SET post_excerpt = replace(post_excerpt, &quot;<a href="http://oldblog.domain.com">http://oldblog.domain.com</a>&quot;, &quot;<a href="http://blog.domain.com">http://blog.domain.com</a>&quot;);
UPDATE wp_2_posts SET post_content = replace(post_content, &quot;<a href="http://oldblog.domain.com">http://oldblog.domain.com</a>&quot;, &quot;<a href="http://blog.domain.com">http://blog.domain.com</a>&quot;);</pre></p>
<p><h3>4. Moving the users</h3>
You can either 1) manually create new user accounts for your users, or 2) try to move the user accounts. Most blogs don&#39;t really have many users beyond the admin, since commenting doesn&#39;t need a user account. My recommendation would be to manually add the very few users you have.</p>
<p>If you want to move the users in bulk using SQL, then you will need to take into account that:</p>
<p><ol>
    <li>In WP 3.0, the <em>wp_users </em>table is shared among <em>all the sites</em>.</li>
    <li>The wp_users table in WP 3.0 has two extra fields: spam and deleted.</li>
    <li>Each blog site has its own <em>wp_capabilities</em>, <em>wp_user-settings</em> and <em>wp_user-settings_time</em> fields (e.g. wp_2_capabilities) in the <em>wp_users</em> table. The format (serialized PHP arrays) appears to be the same, so you will need to create one user with the rights you want manually, then these three keys for each of the blogs you want to user to be able to access.</li>
</ol>
I didn&#39;t try this out, since the blogs I have only use a small number of users. I just created individual admin accounts for those blogs that I am not administering personally.</p>
<h2 id="comments">Comments</h2>
<p><strong><a href="#204" title="2010-06-24 14:26:00">Hikari</a>:</strong> That&#39; tricky!</p>
<p>It&#39;s exactally what I wanna do with my sites, tnx for the tutorial!</p>
<p>Could you make a tutorial about wp_options? :D</p>
<p><strong><a href="#205" title="2010-07-22 12:40:39">leenoux</a>:</strong> thank you,</p>
<p>you save me lots of time :)</p>
<p><strong><a href="#206" title="2010-10-07 15:28:18">John</a>:</strong> This post is the Holy Grail. This information is completely missing from the official Wordpress documentation on how to start a network. They don&#39;t factor in the possibility that we may have EXISTING sites to bring into a network.</p>
<p>This saved me many, many hours of frustration. Thank you.</p>
<p><strong><a href="#208" title="2011-02-10 15:20:38">Seluna</a>:</strong> I am so glad I found this post of yours. I tried the Import/Export method and compared to that, your method is much much quicker. Thank you so much!</p>
<p>I have a little trick with the wp_options though, and what I do is in the old website, I access the &quot;<a href="http://www.domain.com/wp-admin/options.php">http://www.domain.com/wp-admin/options.php</a>&quot; page and I save it down into my computer. Then I access the options.php page for the new website, open the saved options.php and I manually match the fields and change the values to fit.</p>
<p>It&#39;s actually faster then going through the options pages one by one.</p>
<p><strong><a href="#209" title="2011-02-10 15:28:57">Mikito Takada</a>:</strong> Thanks for the tip!</p>
<p><strong><a href="#211" title="2011-02-10 19:57:13">Seluna</a>:</strong> Haha, no problem! Sharing makes the word go round!</p>
<p><strong><a href="#212" title="2011-02-24 18:47:15">Ian Dunn</a>:</strong> I recently had to work out a process for a client where I needed to migrate the options, users, and everything else completely in tact. It takes a little bit of work, but it&#39;s definitely possible. I wrote up a detailed description of the process at <a href="http://iandunn.name/workblog/comprehensive-wordpress-multisite-migrations/">http://iandunn.name/workblog/comprehensive-wordpress-multisite-migrations/</a></p>
]]></description><link>http://localhost:5000undefined</link><guid isPermaLink="true">http://localhost:5000undefined</guid><dc:creator><![CDATA[Mixu]]></dc:creator><pubDate>Sun, 23 May 2010 07:00:00 GMT</pubDate></item><item><title><![CDATA[Setting up multisite Wordpress 3.0 with multiple different domains]]></title><description><![CDATA[<p>Wordpress 3.0 is coming out very soon (apparently they missed their original deadline, see <a href="http://wpdevel.wordpress.com/version-3-0-project-schedule/">the schedule here</a>) - and it has one killer feature for anyone who maintains multiple Wordpress sites: <strong>official support for multiple subdomains</strong> and (<em>unofficial</em>) support for multiple different domains. This means that one only has to maintain and upgrade one Wordpress installation.</p>
<p>Here is my guide to setting up Wordpress 3.0 with multiple different domains and subdomains - based on the experience I got from moving my own blogs to WP 3.0 beta 2 (still waiting for the final release before moving clients as well).</p>
<p><h2>Installing Wordpress 3.0</h2>
The basic installation process is the same as that of WP 2.9. Download, unzip, set up the database and the set up wp-config.php. If you aren&#39;t going to use the multi-site support, then not much will change. Brief instructions below.</p>
<p><h2>Multi-site mode with Apache</h2>
You will need to separately enable the multi-site mode, as well as take care of your Apache settings. WP 3.0 will handle all the requests it gets from a single directory, which means that all your subdomains must use that directory as their DocumentRoot/VirtualDocumentRoot.</p>
<p>Furthermore, WP 3.0 will assume that if you are using multi-site mode with subdomains, you want the subdomains under the first site&#39;s URL - ex. if your first WP 3.0 install is under www.domain.com, then WP 3.0 will set up subdomains in the format subdomain1.www.domain.com.</p>
<p>That means that if you want to use first-level subdomains (ex. blog.domain.com, subdomain2.domain.com etc.), you have to set up WP 3.0 so that your first blog is using the bare domain (ex. domain.com) and not on the www.domain.com subdomain.</p>
<p><h3>0. (Optional) Bare domain setup for Apache</h3>
The way in which you setup your bare domain (and forward from the www -subdomain to the bare domain) depends a lot on how you have set up your domain originally in Apache.</p>
<p>I have been using virtual hosts to host multiple sites, with each subdomain having its own directory. This means that I had to add an additional Vhost directive before my original Vhost directive in httpd.conf. Here is how I did it:</p>
<p><pre lang="apache">    ServerName domain.com
    ServerAlias domain.com blog.domain.com subdomain1.domain.com
    DocumentRoot /var/www/domain.com/www</pre>
As you can see in the first Vhosts directive, I have used the ServerAlias directive to specify domain.com, blog.domain.com and subdomain1.domain.com to be served from the DocumentRoot /var/www/domain.com/www (which is where I have installed WP 3.0).</p>
<p>In addition, I still have the rest of my subdomains served from a VirtualDocumentRoot, and have a forward from the www.domain.com -subdomain to the domain.com bare domain.</p>
<p><pre lang="apache">    ServerName domain.com
    ServerAlias *.domain.com
    VirtualDocumentRoot /var/www/domain.com/%1</p>
<pre class="hljs"><code><span class="hljs-comment"># rewrite www to bare domain</span>
<span class="hljs-keyword"><span class="hljs-common">RewriteEngine</span></span> <span class="hljs-literal">On</span>
<span class="hljs-keyword"><span class="hljs-common">RewriteCond</span></span> <span class="hljs-cbracket">%{HTTP_HOST}</span> ^www.domain.com$<span class="hljs-sqbracket"> [NC]</span>
<span class="hljs-keyword"><span class="hljs-common">RewriteRule</span></span> (.*) <a href="http://domain.com">http://domain.com</a><span class="hljs-number">$1</span><span class="hljs-sqbracket"> [R=301,L]&lt;/pre&gt;</span></code></pre><p>Apache will use the first matching VirtualHost directive (see &quot;<a href="http://httpd.apache.org/docs/2.2/vhosts/details.html">An in-depth discussion of Virtual Host Matching</a>&quot; for more details).</p>
<p>If you want to test your setup - remember to restart Apache - you can use an online redirect checker such as: <a href="http://www.internetofficer.com/seo-tool/redirect-check/">http://www.internetofficer.com/seo-tool/redirect-check/</a></p>
<p><h3>1. Get the files and unzip them</h3></p>
<p><h3>2. Edit wp_config_sample.php</h3>
You can use <a href="https://api.wordpress.org/secret-key/1.1/salt/">https://api.wordpress.org/secret-key/1.1/salt/</a> to generate the secret keys</p>
<p><h3>3. Enable multisite</h3>
Add:</p>
<p><pre lang="php"> define(’WP_ALLOW_MULTISITE’, true);</pre>
to wp-config.php after the secret keys</p>
<p><h3>4. Log in, go to Tools/Network</h3>
Select either the blogs-as-subdomains or blogs-as-directories option and install.</p>
<p><h3>5. Make the changes detailed on the post-install page</h3>
WP 3.0 gives you a number of changes you will need to make manually to .htaccess and wp-config.php.</p>
<p><h2>Adding a new subdomain</h2>
You have now set up the multisite functionality. Next, add a subdomain (see below for how to add a different domain).</p>
<p><h3>1. Login in on your main site</h3></p>
<p><h3>2. Go to Super Admin (new menu at the top)</h3></p>
<p><h3>3. Use the add site form to add a new subdomain</h3></p>
<p><h3>4. Configure your DNS and add a Vhost for the subdomain</h3>
Make sure there is a DNS entry for your subdomain - if you don&#39;t have a wildcard redirect for your domain to your server. If you did the Apache configuration, all you need to do now is to set up your DNS so that the subdomains you want are mapped to your server.</p>
<p><strong>Quick tip for Windows</strong>: edit C:WindowsSystem32driversetchosts and add a temporary hosts entry for your new subdomain, such as:</p>
<pre class="hljs"><code><span class="hljs-number">123.14</span>.<span class="hljs-number">15.16</span> subdomain.domain.<span class="hljs-keyword">com</span></code></pre><p>This will allow you to test the subdomain without having to wait for DNS to propagate. Under Win7, you need to start Notepad as an Administrator (right-click) to edit the file.</p>
<p><h3>5. All done!</h3>
Try navigating to your new subdomain. It should be set up now!</p>
<p><h2>Adding a new (different) domain</h2></p>
<p><h3>1. Use the add site form to add a new subdomain</h3>
You will use the default tools to create all the tables, then you will make a small number of changes to make Wordpress accept a different domain. All credit for this method goes <a href="http://www.interconnectit.com/840/wordpress-3-0-multisite-with-multiple-domains-setup/">InterconnectIt - see their writeup here</a>.</p>
<p><h3>2. Configure your DNS and add a Vhost for the subdomain</h3>
The easiest way is to add another ServerAlias domain to the original domain&#39;s VirtualHost -&gt; ServerAlias directive.</p>
<p>If you try to access the site now, you will get a &quot;Registration&quot; page. This means the Vhost is working.</p>
<p><h3>3. Edit the wp_site table to include your new domain</h3>
This table stores all the domains that can be used in WP 3.0.</p>
<p>Leave &quot;id&quot; empty (it is an autoincrement field), set &quot;domain&quot; to the domain name, &quot;path&quot; should be /.</p>
<p>Make a note of the id your newly inserted row gets after saving, since you will need it in the next step.</p>
<p><h3>4. Edit the wp_blogs table to use the new domain</h3>
Find the row for the subdomain you added earlier. Change &quot;site_id&quot; to the id given to the new row in the wp_site table. Change &quot;domain&quot; to the domain name you want to use.</p>
<p><h3>5. Edit wp<em>[blog_id]_options to use the new domain name</h3>
The WP 3.0 multisite database schema is sharded by having the blog id in the table names. By default these are in the form wp</em>[blog<em>id]</em>*, so you will need to find which set of tables contains your new blog.</p>
<p>Each Wordpress blog stores a small number of settings which need be changed to use the new domain name. You can use the query below to find the mentions of the domain in the options table:</p>
<pre class="hljs"><code><span class="hljs-operator"><span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> <span class="hljs-string"><code>wp_[blog_id]_options</code></span> <span class="hljs-keyword">WHERE</span> <span class="hljs-string"><code>option_value</code></span> <span class="hljs-keyword">LIKE</span> <span class="hljs-string">&quot;%subdomain.domain.com%&quot;</span>;</span></code></pre><p>For me these are: siteurl, home, fileupload_url. Change them to use the new domain.</p>
<p><h3>6. Done!</h3>
<strong>Do you need to move an existing WP 2.9 to WP3.0 multisite?</strong> If you are moving an existing site to the WP multisite you&#39;ve set up, <a href="http://blog.mixu.net/2010/05/23/upgrading-moving-wordpress-2-9-installs-to-multisite-wp-3-0/">check out my second tutorial on the topic</a>.</p>
<p><strong>Did you run into problems enabling themes or plugins on your separate domains?</strong> Have a look at <a href="http://blog.mixu.net/2010/05/31/wordpress-3-0-multi-site-multi-domain-problems-with-solutions/">how I solved a number of issues related to the separate domains setup</a>.</p>
<p><h2>References</h2></p>
<ol>
    <li><a href="http://www.interconnectit.com/840/wordpress-3-0-multisite-with-multiple-domains-setup/">http://www.interconnectit.com/840/wordpress-3-0-multisite-with-multiple-domains-setup/</a></li>
</ol>

<h2 id="comments">Comments</h2>
<p><strong><a href="#180" title="2010-05-23 15:54:57">Jeff</a>:</strong> Hi,</p>
<p>I&#39;ve followed all these steps, and successfully setup a completely separate domain (like www.johnny.com) to display a second blog setup in WP 3 (originally setup using subdomains, like johnny.mysite.com).</p>
<p>After this success however, my super admin cannot see the new site in Super Admin&gt;Sites, nor can I login when going to the new wp-admin section (like www.johnny.com/wp-admin) using this super admin.</p>
<p>Have you found this to be the case as well?</p>
<p><strong><a href="#181" title="2010-05-23 16:18:53">Mikito Takada</a>:</strong> Yes, after using a separate domain the site is no longer listed my Super Admin-&gt;Sites section. I expect that the interface will be improved in future releases of Wordpress 3.</p>
<p>However, I have been able to use the Super admin login on the alternate domain&#39;s /wp-admin/ and administer it normally. Another slight problem with separate domains was that user registration links were not shown, but I&#39;m not sure whether that is an issue with the Twenty-Ten theme or with the core. If you can&#39;t use the alternate domain with the super admin login, have a look at what the wp_capabilities field in wp_users says.</p>
<p><strong><a href="#182" title="2010-05-23 16:56:57">Jeff</a>:</strong> Mikito,</p>
<p>Thanks for the tips, I just figured out that you can go in via Super Admin &gt; Sites, and change the domain name to whatever you want. As long as your DNS and Apache is configured correctly, you don&#39;t have to change any database tables. Super easy!</p>
<p>-Jeff</p>
<p><strong><a href="#183" title="2010-05-24 18:57:02">Mikito Takada</a>:</strong> It seems indeed that you can change the domain under Super Admin -&gt; Sites BUT it does not change the fileupload<em>url option in wp</em>[blog_id]_options.</p>
<p>And if you don&#39;t do the wp_site and wp_blogs table editing, it&#39;s not possible to log in as administrator - this is with the current nightly.</p>
<p>But this problem only appears if you are using separate domains.</p>
<p><strong><a href="#184" title="2010-06-13 19:20:48">Jon Henshaw</a>:</strong> This is what I&#39;ve been using: <a href="http://raventools.com/blog/2890/how-to-easily-manage-multiple-wordpress-sites-with-one-database-and-one-code-base" rel="nofollow">How to Easily Manage Multiple WordPress Sites With One Database and One Code Base</a>. One of our developers wrote it in 2008, and it&#39;s been working well for me ever since.</p>
<p>The problem is that everything isn&#39;t controlled in one admin, which is very annoying. Especially as I continue to add new sites. I&#39;m curious to know if you&#39;ve had any issues with this setup. I&#39;m also curious to know why WordPress hasn&#39;t implemented this, if it&#39;s technically possible, as you&#39;ve just demonstrated.</p>
<p><strong><a href="#186" title="2010-07-17 02:53:53">Daniel</a>:</strong> Here&#39;s a simple fix for sites not showing up under Super Admin-&gt;Sites when WP 3.0 is in separate domain mode.</p>
<p>Edit the file /wp-admin/ms-site.php, look for this query statement.</p>
<p>$query = &quot;SELECT * FROM {$wpdb-&gt;blogs} WHERE site_id = &#39;{$wpdb-&gt;siteid}&#39; &quot;;</p>
<p>Remove the WHERE clause. The new query should look like this.</p>
<p>$query = &quot;SELECT * FROM {$wpdb-&gt;blogs} &quot;;</p>
<p>Save it and give it try. I have 3 separate domain that I&#39;m testing with and so far this has worked.</p>
<p>Thanks for writing your issues down, it has saved hours of work.</p>
<p>-Daniel</p>
<p><strong><a href="#187" title="2010-07-17 10:28:19">Mikito Takada</a>:</strong> Daniel, thank you for that tip! Awesome!</p>
<p><strong><a href="#189" title="2010-07-25 16:14:32">dmartin</a>:</strong> That was absolutelly perfect, thank you so much for the tutorial... Maybe I would add the correct mysql commands for newbies (I&#39;m one of those, and it has taken a little time to guess the right syntax for the modifications), but everything runs perfectly well right now.</p>
<p>I&#39;ve set up a test system with two blogs, and after that last modification (didn&#39;t show the two blogs after all the process in the Sites menu) everything is perfect.</p>
<p>I&#39;m testing now the user registration, I&#39;d like to add a Facebook Connect option and &quot;build a community&quot; (with or without FB) which could be useful in case users want to know each other. I&#39;ve seen sites that do this, and I&#39;ll try to implement that on my blog network.</p>
<p>Great article, thank you so much!!</p>
<p><strong><a href="#190" title="2010-08-08 19:34:09">Ghufron</a>:</strong> I&#39;ve two difference domains, ghufron.com and postingan.com. Can I create multi-site with different domain? For example, I&#39;ve installed WP 3.0.1 on ghufron.com and I want to create multi-site on it with postingan.com</p>
<p>Please reply via email :)</p>
<p>Thank you</p>
<p><strong><a href="#191" title="2010-08-21 19:26:21">Žiga Dolhar</a>:</strong> Hey,</p>
<p>after following your instructions, I am able to log in to blogs on different domains. However, those blogs under different domains do not anymore show the &quot;plugin&quot; panel in administration. Also, linked to this, when I try to import contents into this new (on-a-different-domain) blog, the import plugin is not available (since it is a plugin).</p>
<p><strong><a href="#192" title="2010-08-25 17:02:25">DMartin</a>:</strong> Daniel,</p>
<p>I&#39;ve just repeated the process for an upgraded instalation of my blog network, and I&#39;ve seen that that WHERE clause is not anymore at wp-admin/ms-admin.php if you are working with Wordpress 3.0.1.</p>
<p>Instead, you should edit wp-admin/ms-sites.php</p>
<p>Everything is the same for the rest of the comment.</p>
<p>Thank you so much for your post!</p>
<p><strong><a href="#193" title="2010-09-14 09:11:01">Mikito Takada</a>:</strong> Ziga,</p>
<p>have a look at my post on fixing the problems with this setup, there should be solution: <a href="http://blog.mixu.net/2010/05/31/wordpress-3-0-multi-site-multi-domain-problems-with-solutions/">http://blog.mixu.net/2010/05/31/wordpress-3-0-multi-site-multi-domain-problems-with-solutions/</a></p>
<p><strong><a href="#194" title="2010-11-01 02:04:31">Daniel</a>:</strong> DMartin,
Great, I&#39;m about to give 3.0.1 a go, thanks for the heads up.</p>
<p>-Daniel</p>
<p><strong><a href="#195" title="2010-11-10 01:48:39">Daniel</a>:</strong> Has anyone had issues with 3.0.1 when editing sites? I&#39;m getting &quot;You do not have permission to access this page.&quot;</p>
<p>Editing worked on 3.0.0, now that I&#39;ve upgraded it&#39;s broken.</p>
<p>I&#39;ve found this line of code that may be the issue.</p>
<p>if($details-&gt;site<em>id != $wpdb-&gt;siteid)
         wp<em>die( </em></em>( &#39;You do not have permission to access this page.&#39; ) );</p>
<p>site_id is the new domain, where siteid is the &quot;root&quot; domain or the main domain.</p>
<p>Any ideas?</p>
<p><strong><a href="#196" title="2010-12-08 05:10:39">Dan S.</a>:</strong> Mikito,</p>
<p>Thanks for that post -- it solved most of the issues I&#39;ve encountered.</p>
<p>The one problem that I haven’t been able to solve is a file size upload limit of 1mb. It’s neither respectful of the PHP.ini file size limits, nor any set in .htaccess</p>
<p>Any suggestions?</p>
<p><strong><a href="#197" title="2011-01-19 06:32:18">configure domain</a>:</strong> This is an awesome resource.Thank you so much for putting it together in such a well organized and complete manner.I am going to use your site as a reference and hopefully learn more.I hope you publish more articles like this again shortly!</p>
<p><strong><a href="#198" title="2011-03-15 04:28:22">John</a>:</strong> Where is $query = “SELECT * FROM {$wpdb-&gt;blogs} WHERE site_id = ‘{$wpdb-&gt;siteid}’ “;</p>
<p>on WP 3.1?</p>
<p>Thanks</p>
<p><strong><a href="#199" title="2011-03-15 10:28:16">Mikito Takada</a>:</strong> ./wp-admin/ms-sites.php:16432:        $query = &quot;SELECT * FROM {$wpdb-&gt;blogs} WHERE site_id = &#39;{$wpdb-&gt;siteid}&#39; &quot;;</p>
<p><strong><a href="#200" title="2011-03-23 21:18:19">Vicente</a>:</strong> /wp-admin/includes/class-wp-ms-sites-list-table.php</p>
<p><strong><a href="#666" title="2013-03-18 17:20:25">chandanks87</a>:</strong> hi,
For each new domain I need to do like this. Is there any plugin which substitute these all manual job.</p>
]]></description><link>http://localhost:5000undefined</link><guid isPermaLink="true">http://localhost:5000undefined</guid><dc:creator><![CDATA[Mixu]]></dc:creator><pubDate>Mon, 17 May 2010 07:00:00 GMT</pubDate></item><item><title><![CDATA[Syntax highlighting / color schemes for Netbeans]]></title><description><![CDATA[<p>There are two important things to try out in picking the IDE settings that work best for you: 1) the font you use and 2) the color scheme for syntax highlighting.</p>
<p><strong>Choice of font</strong></p>
<p>My font of choice is Consolas (included in Vista/Win7 and <a href="http://www.microsoft.com/DOWNLOADS/details.aspx?familyid=22E69AE4-7E40-4807-8A86-B3D36FAB68D3&amp;displaylang=en">available for download</a>). It looks awesome with ClearType and the zero character is different from the letter O. My second choice is Bitstream Vera Sans Mono, which is free and widely available.</p>
<p>The Code Project has a great compilation of <a href="http://www.codeproject.com/KB/work/FontSurvey.aspx">the 42 best programming fonts</a>.</p>
<p><strong>Choice of color</strong></p>
<p><strong><a href="http://blog.mixu.net/files/2010/05/darkwhite.png"><img class="alignnone size-full wp-image-816" title="darkwhite" src="http://blog.mixu.net/files/2010/05/darkwhite.png" alt="" width="759" height="313" /></a></strong></p>
<p>The basic choice is between a dark background and a light background. Full contrast schemes are considered more hard to read, which means that slightly off-white or off-black backgrounds are easier to read.</p>
<p>Personally, I prefer white or off-white with dark text. <a href="http://www.codinghorror.com/blog/2005/07/code-colorizing-and-readability.html">Jeff Atwood did some background reading </a>into this and quotes from a study that <em>&quot;When light text is placed on a dark background the text may seem to glow and become blurred; this is referred to as halation, and it may make the text harder to read.&quot; </em>Subjectively, I find white text on dark backgrounds to be a bit uncomfortable.</p>
<p>&quot;If everything is important, then nothing is important&quot;. This was mentioned in Garret Dimon&#39;s <a href="http://www.slideshare.net/garrettdimon/application-interface-design">Application Interface Design presentation</a>, and I think it is a good point: Don&#39;t highlight every syntactically different part of the code with sharp colors, just the stuff that matters the most. For me, these would be the keywords, variables and class names.</p>
<p>Hence I changed comments to be de-emphasized (gray) as well as any HTML tags (which are less important than the code in views). I am experimenting with a off-white background to slightly reduce contrast and eyestrain.</p>
<p><strong>My light color scheme (Netbeans, Textmate and Sublime Text):</strong></p>
<p>See what my color scheme looks like at the bottom of the post. You can download the updated version  for NetBeans  version <a href="http://blog.mixu.net/files/2010/05/fonts_updated.zip">here</a>: includes minor tweaks, such as changing the semi-comma character to light gray.</p>
<p>NEW! Also available for Textmate/Sublime Text <a href="http://blog.mixu.net/files/2010/05/my_themes.zip">here</a>. Unzip, open &quot;Browse Packages&quot; from Sublime Text, go to the &quot;User&quot; folder and copy the thTheme files there.</p>
<p><strong>My dark color scheme (NEW!):</strong></p>
<p>I&#39;ve also started to use a dark color scheme inspired by the Espresso Libre scheme for Sublime Text 2. See what my color scheme looks like at the bottom of the post. You can download it for NetBeans <a href="http://blog.mixu.net/files/2010/05/mixu_espresso.zip">here</a>.</p>
<p>NEW! Also available for Textmate/Sublime Text <a href="http://blog.mixu.net/files/2010/05/my_themes.zip">here</a>. Unzip, open &quot;Browse Packages&quot; from Sublime Text, go to the &quot;User&quot; folder and copy the thTheme files there.</p>
<p>The color scheme uses very few colors as I find having many colors distracting.</p>
<p><strong>More color schemes:</strong></p>
<p>Whether or not you use Visual Studio (I use Netbeans), go check out the great <a href="http://studiostyles.info/schemes">gallery of syntax coloring schemes at studiostyles</a>. They have dozens of user-submitted color schemes and alternatives which you can use as a basis for configuring your own IDE.</p>
<p><strong>My light color scheme</strong></p>
<p><a href="http://blog.mixu.net/files/2010/05/colors.png"><img class="alignnone size-full wp-image-811" title="colors" src="http://blog.mixu.net/files/2010/05/colors.png" alt="" width="634" height="596" /></a></p>
<p><strong>My dark color scheme:</strong></p>
<p><a href="http://blog.mixu.net/files/2010/05/mixu_espresso.png"><img class="alignnone size-full wp-image-1975" title="mixu_espresso" src="http://blog.mixu.net/files/2010/05/mixu_espresso.png" alt="" width="604" height="573" /></a></p>
<h2 id="comments">Comments</h2>
<p><strong><a href="#115" title="2010-10-07 00:52:18">moondowner</a>:</strong> Searching for color schemes for NetBeans I found yours, just to say that I really like it!</p>
<p><strong><a href="#116" title="2011-01-10 20:08:24">nobita</a>:</strong> great work ! it&#39;s useful . Thank you :)</p>
<p><strong><a href="#118" title="2011-09-22 15:37:02">Anders</a>:</strong> Hi.</p>
<p>About espresso libre:
Now that is a dark scheme that I can actually use for longer than some minutes. Love the blue keywords.</p>
<p>Noticed, that since I&#39;m working with Java now, there is a &quot;Mark occurrances&quot; that when using the default background (236, 235, 163) doesn&#39;t work very well with the bright foreground color of e.g. methods. Giving this a dark gray foreground color, like (102,102,102) helped a lot, though.</p>
<p><strong><a href="#119" title="2011-09-22 19:15:17">Mikito Takada</a>:</strong> Thanks! The original Espresso Libre is actually a bit more colorful: <a href="http://inkdeep.github.com/TextMate-Themes/images/espresso_libre.png">http://inkdeep.github.com/TextMate-Themes/images/espresso_libre.png</a></p>
<p>I like the background but I find more than 2-3 colors distracting, which is why I wrote my version.</p>
<p><strong><a href="#120" title="2011-09-23 09:46:07">Anders</a>:</strong> Yes, I put my words down slightly wrong. I was addressing your version of course; a bit more pleasing to the eyes than the original.</p>
<p><strong><a href="#121" title="2012-06-22 13:04:39">Ian</a>:</strong> Excellent work, I&#39;ve started using the mixu_expresso for netbeans.</p>
]]></description><link>http://localhost:5000undefined</link><guid isPermaLink="true">http://localhost:5000undefined</guid><dc:creator><![CDATA[Mixu]]></dc:creator><pubDate>Mon, 03 May 2010 07:00:00 GMT</pubDate></item><item><title><![CDATA[7 additional tips for CSS markup]]></title><description><![CDATA[<p><h2>1. Use a test page</h2>
Make a test page that has:</p>
<p><ol>
    <li>All of the common HTML elements</li>
    <li>All of your widgets and inline elements</li>
</ol>
... on one page. This allows you to make and preview changes quickly.</p>
<p>Snippllr.com has a couple of test pages containing the major HTML elements:</p>
<p><a href="http://snipplr.com/view/8121/html-test-page-for-css-style-guide/ ">http://snipplr.com/view/8121/html-test-page-for-css-style-guide/
</a><a href="http://snipplr.com/view/8121/html-test-page-for-css-style-guide/ "> http://snipplr.com/view/12564/css-test-page/</a></p>
<p><h2>2. Start with a CSS reset</h2>
Using a CSS reset helps because it eliminates the inconsistencies between browsers and forces you to specify all of the styles you want. It makes CSS stylesheets more explicit, which is a good thing for maintainability.</p>
<p><a href="http://meyerweb.com/eric/thoughts/2007/05/01/reset-reloaded/">http://meyerweb.com/eric/thoughts/2007/05/01/reset-reloaded/</a></p>
<p><a href="http://developer.yahoo.com/yui/reset/  ">http://developer.yahoo.com/yui/reset/</a></p>
<p><h2 style="font-size: 1.5em;">3.Order your rulesets into sections - generic to specific</h2>
Use stylesheet rule order to define &quot;base&quot; and &quot;special case&quot; tags. First, organize your CSS rules into sections so that the most generic rules (e.g. typography) come first before specific rules such as widgets. This is useful because it makes it easier to locate rules within the file and to make modifications.</p>
<p>For example, I have used the following sections:</p>
<p><div id="_mcePaste"></p>
<p><ol>
    <li> Base/reset styles (Yahoo&#39;s CSS reset rules)</li>
    <li> Typography styles (inline elements applied to the whole page such as fonts, links, headings, paragraphs)</li>
    <li> Layout (fixed containers, blocks of content and other &quot;website-specific&quot; positioning)</li>
    <li>Widgets (ex.  informational messages, contextual help, menu lists, collapsible navigation list, tabs, table styles...)</li>
</ol>
</div></p>
<p><h2 style="font-size: 1.5em;">4. Order your widget rules from &quot;base&quot; to &quot;special case&quot;</h2>
Organize the rules into &quot;base&quot; widgets and &quot;special case&quot; if necessary. Have the &quot;base&quot; widget specify the most important rules, and then override for the &quot;special case&quot;.</p>
<p><h2 style="font-size: 1.5em;">5. Indent your CSS files!</h2>
Use indentation to organize the code - the first level of indentation is for sections, the second for widgets and the third for special cases of widgets or sub-widgets. (If you are concerned about bandwidth, use a CSS minifier afterwards - don&#39;t sacrifice understandability just to try to save a few characters).</p>
<p>For example:</p>
<p><pre lang="css">/<strong> Css reset </strong>/
/<strong> Base styles </strong>/
   ...
/<strong> Typography styles </strong>/
   ...
/<strong> Layout styles </strong>/
   /<strong> Containers </strong>/
   ...
/<strong> Widgets </strong>/
   /<strong> Information messages </strong>/
   ...
   /<strong> Tabs widget </strong>/
   div.tabs {
      ...
   }
   div.tabs ul {
      ...
   }
   div.tabs ul li {
      ...
   }
   div.tabs ul a:link, div.tabs ul a:visited {
      ...
   }
   div.tabs ul li.selected a, div.tabs ul a:hover {
      ...
   }</pre></p>
<p><h2>6. Keep the dependency chains as short as possible</h2>
Avoid modifying the HTML element styles without specifying a class. Adding styles to tags without a class -attribute is problematic because it makes the dependencies much more complex.</p>
<p>By keeping dependency chains short - so that the base CSS is unmodified and all necessary styles are defined on a class-specific level -  you keep the dependencies reasonably simple.</p>
<p><h2>7. Never rely on coincidental nesting &amp; avoid &quot;class-itis&quot;</h2>
&quot;Class-itis&quot; is the disease that causes CSS files to have too many classes. Instead, use tag nesting to create widgets.</p>
<p>Have single base element with a simple but descriptive class name, and then specify the sub-elements.</p>
<p>For example:</p>
<ul>
    <li>Instead of &quot;div.content-title&quot; use &quot;#content h1&quot; (e.g. div#content with a h1 tag inside it)</li>
    <li>Instead of &quot;div.form-label&quot; use &quot;#form label&quot; (e.g. form#form with a label tag inside it)</li>
</ul>

<h2 id="comments">Comments</h2>
<p><strong><a href="#107" title="2010-03-25 09:12:34">gman</a>:</strong> I&#39;m not an HTML or CSS guru by any means but running a blog, I can say that &quot;#content h1&quot; makes it hard to edit my blog.</p>
<p>What happens is around the main page there is #body or some such. That means EVERYTHING inside that is effected. Around that this are things like #left-column, #middle, #right-column. So now both #body and #middle effect everything in my content. Finally there is something like #posts, #post and #content</p>
<p>So I&#39;m trying to write some content. I need a table. That table needs custom styles to get it&#39;s point across.  But now the css for #body, #middle, #posts, #post and #content all effect it.  I really want an easy way to be able to make some custom content with custom styles and not have to know which 25 settings I need to reset because of the &quot;#id tag&quot; idiom.</p>
<p>Is there a recommended way to do that?</p>
<p><strong><a href="#108" title="2010-03-27 18:27:17">Mikito Takada</a>:</strong> Thanks for commenting. I think that there is a small set of inline elements, such as H1 for which it is useful to define &quot;global&quot; styles. You can still override the styles in those cases where it is necessary - just organize the related elements as a &quot;widget&quot; with a base class name or use an ID.</p>
<p>I don&#39;t think tables should have global styles besides the CSS reset. It seems to always end up being too complex. So what I would do is give the table a class name or ID, and give each type of table widget it&#39;s own set of styles.</p>
<p>This would include inline elements like H1 as well - but instead of relying on the coincidental application of styles from the &quot;global style&quot; I would explicitly define all the necessary styles inside the widget definition. This wastes some space, but in my opinion stylesheets are meant to be human-readable and portable and if that requires an extra couple of hundred bytes, it still is worth it.</p>
<p><strong><a href="#111" title="2011-11-10 14:17:40">Brian</a>:</strong> All and all a good article. Well done !!</p>
]]></description><link>http://localhost:5000undefined</link><guid isPermaLink="true">http://localhost:5000undefined</guid><dc:creator><![CDATA[Mixu]]></dc:creator><pubDate>Mon, 15 Mar 2010 07:00:00 GMT</pubDate></item><item><title><![CDATA[Options for securing PHP in a shared virtual hosting environment]]></title><description><![CDATA[<p>The terms and options for implementing security measures can be quite confusing. This blog post is a survey of the options available, including some possible pros and cons and definitions of relevant terminology.</p>
<p>It is very typical to run multiple sites on a single server, since it would be overkill to run each small website and blog on its own VPS instance. The default Apache setup: mod_php and prefork-mpm does not offer any privilege separation or hardening for virtual hosts. Hence the need for additional security measures.</p>
<p><strong>What are the general approaches taken to securing PHP?</strong></p>
<p>The approaches taken in securing PHP can be divided into two broad categories:</p>
<p><ol>
    <li><strong>Hardening PHP</strong>. This approach aims to improve the security of PHP scripts by limiting dangerous functionality on a site-by-site basis and by preventing flaws from escalating through additional patches to the PHP core. The main examples are: a) tweaking PHP core settings such as open_basedir and b) running a version of PHP which includes additional options to limit functionality and prevent flaws such as buffer overflows (<a href="http://www.hardened-php.net/suhosin/">Suhosin</a>).</li>
    <li><strong>Privilege separation. </strong>This approach limits the extent to which other sites can be damaged if one of the websites on the shared server is compromised. There are several solutions, including <a href="http://www.suphp.org/">mod_suPHP</a> and <a href="http://httpd.apache.org/docs/2.0/suexec.html">suEXEC</a>.</li>
</ol>
<strong>How can PHP and Apache interact?</strong></p>
<p>There are several ways in which PHP and other scripts can be invoked by Apache:</p>
<p><ul>
    <li><a href="http://en.wikipedia.org/wiki/Common_Gateway_Interface">CGI (Common Gateway Interface) </a>is a standard protocol that defines how webserver software can delegate the generation of webpages to a console application. It operates on a &quot;one new process per request&quot; basis.</li>
    <li><a href="http://en.wikipedia.org/wiki/FastCGI">FastCGI</a> is a protocol introduced in the mid-1990s that improves upon the older CGI protocol. It allows a single persistent process pool to handle multiple requests over its lifetime, reducing overhead.</li>
    <li>In-process as an Apache module, such as the default mod_php.</li>
</ul>
The default interaction between PHP and Apache is handled by the mod_php module. The most common ways of implementing privilege separation use either CGI or FastCGI to interface with PHP. PHP supports both CGI and FastCGI protocols.</p>
<p><strong>Privilege separation can be done either:</strong></p>
<p><ol>
    <li>by using CGI scripts and suEXEC, a feature built in Apache</li>
    <li>by using Apache modules that make invoking CGI scripts easier</p>
<p><ul>
    <li><em>Apache modules</em> are bundles that can be loaded to add new functionality to Apache. They are integrated into the Apache server and add new functionality to instances of the server, such as the capability to interpret PHP scripts.</li>
</ul></p>
<p><ul>
    <li>Examples: mod_php, mod_suPHP, mod_fastcgi and mod_fcgid.</li>
</ul>
</li>
    <li>by using Apache MPMs that support privilege separation</p>
<p><ul>
    <li><a href="http://httpd.apache.org/docs/2.0/mpm.html"><em>Apache MPMs</em></a><em> (Multi-Processing Modules)</em> are responsible for binding to network ports on the machine, accepting requests, and dispatching children to handle the requests. There are several different MPMs - the Unix platform default is the prefork mpm.</li>
    <li>Examples: prefork, worker, perchild, mpm_itk, mpm_peruser</li>
</ul>
</li>
</ol>
<strong>What are the options for privilege separation?</strong></p>
<p><strong>suEXEC</strong></p>
<p><strong><span style="font-weight: normal;">suEXEC is a feature built into Apache, but not included in the default Apache installation. It makes all CGI scripts execute with the user id and permissions of their owners. It can be used with PHP and with other CGI scripts.</span></strong></p>
<p>It consists of a setuid &quot;wrapper&quot; binary that is called by the main Apache web server, and which executes CGI scripts with the correct used id.</p>
<ul>
<li><p>Tried and tested</p>
</li>
<li><p>Can be used with other languages than PHP</p>
</li>
<li><p>Low performance without FastCGI (similar to suPHP)</p>
</li>
<li><p>Separate script files are a minor hassle</p>
</li>
</ul>
<p><strong>Module: mod_suPHP </strong></p>
<p>mod_suPHP makes PHP scripts execute with the user id and permissions of their owners.</p>
<p>It consists of an Apache module (mod_suphp) and a setuid root binary (suphp), which calls PHP as a CGI process.</p>
<ul>
<li><p>Easy to install, in RPMForge repo (<a href="http://wiki.centos.org/AdditionalResources/Repositories/RPMForge">http://wiki.centos.org/AdditionalResources/Repositories/RPMForge</a>)</p>
</li>
<li><p>Quite commonly used</p>
</li>
<li><p>Low performance relative to others (similar to suEXEC)</p>
</li>
<li><p>PHP specific solution</p>
</li>
</ul>
<p>= Recommended for low load sites which are not using their resources to their limits.</p>
<p><strong>Module: FastCGI (mod_fastcgi or mod_fcgid)</strong></p>
<p>mod_fastcgi and mod_fcgid implement process persistence between page views and communicate with PHP using FastCGI. They do not by themselves perform privilege separation, suEXEC is needed.</p>
<ul>
<li><p>Decent performance when using suEXEC with FastCGI, similar or better performance than mod_php has been reported</p>
</li>
<li><p>Can be used with other languages than PHP</p>
</li>
<li><p>FastCGI may require more memory because there are more persistent processes (more suited for servers with a lot of memory)</p>
</li>
<li><p>Separate script files are a minor hassle</p>
</li>
</ul>
<p>= Recommended for higher load sites.</p>
<p><strong>MPM: mpm_itk and mpm_peruser</strong></p>
<p>These are alternative MPMs for Apache that replace the default preform MPM and perform additional privilege separation.</p>
<p>mpm_itk works in a manner similar to regular CGI scripts in that it does not reuse processes after each request. However, unlike CGI scripts, it invokes each process with the user id and group specified for that virtual host.</p>
<ul>
<li><p>Neat solution with decent performance, some systems have it in the repos</p>
</li>
<li><p>Must patch and compile separately in Centos</p>
</li>
<li><p>Not as commonly used as suEXEC or suPHP</p>
</li>
</ul>
<p>= Recommended as a upcoming solution that is higher performance than mod_suPHP and easier to setup than suEXEC+FastCgi.</p>
<p>mpm_peruser creates one or more apache child processes for each unique user/group, each handling its own set of virtual hosts.</p>
<ul>
<li><p>Faster than mpm_itk</p>
</li>
<li><p>Must patch and compile separately in most systems</p>
</li>
<li><p>Development and adoption seems to be more limited than mpm_itk</p>
</li>
</ul>
<h2 id="comments">Comments</h2>
<p><strong><a href="#112" title="2010-03-03 09:38:18">PhpCatalog</a>:</strong> I do not recommend Shared Hosting for a serious business</p>
<p><strong><a href="#113" title="2010-03-20 23:48:07">Mikito Takada</a>:</strong> &quot;Shared hosting&quot; here refers to sharing a single VPS among multiple websites. I do agree that keeping physically separate hosts is valuable - but it should not be the only form of security in use.</p>
<p>There are many cases in which a shared environment works better - like hosting a bunch of blogs and brochure websites and still be remain reasonably secure.</p>
<p><strong><a href="#114" title="2011-03-23 15:38:06">Matt Kukowski</a>:</strong> Only problem with suPHP is that it does not allow you to use PHP opcode caching such as APC which greatly speeds up PHP and less disk thrashing.</p>
<p>But, there are other methods, but they are harder to set up.</p>
]]></description><link>http://localhost:5000undefined</link><guid isPermaLink="true">http://localhost:5000undefined</guid><dc:creator><![CDATA[Mixu]]></dc:creator><pubDate>Wed, 24 Feb 2010 08:00:00 GMT</pubDate></item><item><title><![CDATA[10-month retrospective on writing this blog]]></title><description><![CDATA[<p>I started writing this blog on a whim ten months ago. Here is quick look back at my three original goals and things I have learned.</p>
<h3><strong>1. To write about things you care about for yourself</strong></h3>
<em>Have I succeeded?</em> Yes. This is probably the goal I am most satisfied with. I find myself referring back to my own posts (e.x. on <a href="http://blog.mixu.net/2009/11/setting-up-spf-senderid-and-dkim-on-centos-5-3-using-sendmail/">how to setup DKIM on Centos</a>, or <a href="http://blog.mixu.net/2009/08/semantic-css-naming-best-practices/">how to implement semantic naming in CSS</a>), which I think is an indication that what I write has longer-lasting value to me.

<strong>Lesson learned #1:</strong> Writing helps you clarify your own thoughts. To me, this not an online diary - my blog is my online whiteboard.

<strong>Lesson #2: </strong>Writing a blog helps you with expressing your ideas briefly.<strong> </strong>Writing a blog has been educational, because one needs to really stick to simple, short and easy-to-skim posts. My point of comparison is academic writing, which is much more rigorous with the details and definitions of concepts. With blog posts, you can&#39;t do that because of space limitations.

<strong>Lesson #3:</strong> The best test for content you write in my opinion is whether you would give a damn if someone else wrote about this very same topic. Another good question is whether you think you will give a damn in a week, a month or a year? Not all content is evergreen, but I do think it should either be something worth revisiting/updating later; or if that is not possible at least timely and helpful.

<strong><strong>2. To learn about marketing and publicity without having to face high stakes</strong></strong>

<em>Have I succeeded?</em>Not really. Writing a blog has kept the thought of marketing it in the back of my mind, but so far I have done very little about it.

<strong>Lesson #3: </strong> Headlines and searchability matters. As of now, I have about 2000 monthly visitors, or 60-70 per day. Most of that traffic comes from Google searches on the relevant topic. The posts that get no traffic are those that have a title that no-one searches for.

<strong>Lesson #4:</strong> Blogging is about taking part in a conversation with other people. If you want traffic, you need to interact with other blogs and contribute. Search engines can only give you the traffic that cares about that specific topic, long-term engagement seems to be a result of building connections and referrals.

<strong>Lesson #5:</strong> A blog is an extension what you do offline. No point in getting obsessed with getting referred to online if you do not connect to people in the real world. I&#39;d prefer my blog to be a convenient way of learning more about me and the topics I discuss off the Internet rather than a separate endeavor.

<strong>3. Realize that the rest of the world does not, in fact, give a damn </strong>

<em>Have I succeeded?</em> Yes. Woohoo! Nobody cares, and I don&#39;t give a damn. As <a href="http://sivers.org/up2you">Derek Sivers said</a>, <em>&quot;Nobody&#39;s going to help you. Does that encourage you or discourage you?&quot;</em> 

<strong>Lesson #6:</strong> In my opinion, if something is worth doing, it&#39;s worth doing whether or not other people give a damn.

One of my favorite recent quotes is from <a href="http://en.wikipedia.org/wiki/James_Stockdale">James Stockdale</a>, a Vietnam POW: <em>&quot;You must never confuse faith that you will prevail in the end—which you can never afford to lose—with the discipline to confront the most brutal facts of your current reality, whatever they might be.&quot;</em> That nobody cares is a reality, and if that makes you feel like crying, you might as well not try.

<strong>What will 2010 look like?</strong>
<h3>What I will NOT do:</h3>


<ol>
    <li>Blog more frequently. This is not my third or fourth job. It&#39;s a hobby. A couple of posts a month is just fine, as long as they are quality posts or solve some real problem.</li>
    <li>Link trading, link fishing, directory listings, forum participation. It may work, but I don&#39;t care enough to start some sort of campaign solely for the sake of getting more traffic. I will link to things I refer to and would like to be a bit more active in commenting about stuff I care about, however.</li>
    <li>Advertising, either on the blog or for the blog. I don&#39;t need the money and I will certainly not pay for some #¤%&amp;?! to visit my blog.</li>
</ol>

<p>What I will do:</p>
<ol>
    <li>Respond to commenters (more).</li>
    <li>Be a bit more active with commenting on other blogs. I haven&#39;t done this so far, because I just don&#39;t have the habit of writing comments. However, since I like getting comments on my posts, it would probably be nice to do the same - but only if I have a real opinion or alternative viewpoint.</li>
    <li>Cross-promote posts on your own blog. It&#39;s not enough to be useful, you also need to make other relevant content easy to find on your blog.
I am surprised at how bad most blogs are with making me click on a second post if I liked the one I read. Archives need to list all the posts simply, most popular content helps understand what the blog is about, and then there should be &quot;collection pages&quot; that collect and summarize previous posts on relevant topics. Related posts and updates (e.g. to link to a relevant later post) are also important.  Gotta still write those collection pages for this blog.</li>
    <li>Create positive expectations regarding future content. It is the expectation that future posts are good that makes me interested in a blog.
Creating a series of posts on a topic, or by highlighting other resources or ongoing projects will probably help build positive expectations for this blog.</li>
    <li>Make it easier to share stuff and subscribe via RSS. This probably means adding those widgets for sharing a post, adding a free feed-sharing service, better RSS links and perhaps Twitter reactions (if I ever start using Twitter).</li>
    <li>Guest author on some other blog or have another blogger guest post/interview here.</li>
    <li>Look at the CSS of this site to make the text easier to skim.</li>
    <li>Add downloadable stuff. Since I already writing about code, why not publish some and make those downloads easily accessible? Since I am already writing scientific articles and working papers, why not make those available?</li>
</ol>

<p><strong>Recommended stuff</strong></p>
<p><a href="http://www.problogger.net/archives/2008/03/11/how-id-promote-my-blog-if-i-were-starting-out-again/">http://www.problogger.net/archives/2008/03/11/how-id-promote-my-blog-if-i-were-starting-out-again/</a></p>
<p><a href="http://www.problogger.net/archives/2005/08/17/converting-one-off-visitors-to-your-blog-into-regular-readers/">http://www.problogger.net/archives/2005/08/17/converting-one-off-visitors-to-your-blog-into-regular-readers/</a></p>
]]></description><link>http://localhost:5000undefined</link><guid isPermaLink="true">http://localhost:5000undefined</guid><dc:creator><![CDATA[Mixu]]></dc:creator><pubDate>Sun, 31 Jan 2010 08:00:00 GMT</pubDate></item><item><title><![CDATA[Finnish translation for Subscribe2 / Suomenkielinen käännös Subscribe2 -pluginiin]]></title><description><![CDATA[<p><strong>Installation instructions</strong></p>
<p>I&#39;ve made a Finnish translation for the Wordpress Subscribe2 -plugin, download it here: <a href="http://blog.mixu.net/files/2010/01/subscribe2-fi.zip">subscribe2-fi.zip</a></p>
<p>Upload the subscribe2-fi.mo file to the wp-content/plugins/subscribe2/ directory. If WPLANG in wp-config.php is something other than the default &quot;fi&quot;, then change &quot;fi&quot; in the filename to the correct value.</p>
<p>I was reminded again how hard it is do proper translations in Finnish because of the differences in word order compared to English, e.g. &quot;For digest notifications, date order for posts is&quot; -&gt; &quot;Yhteenvetomuotoisissa päivityksissä artikkelien (aika)järjestys on&quot;...</p>
<p>If you want to improve the translation, open the .po -file in Poedit or some other editor. The translation was done in one go, so I some of the wordings could be improved. (Then again, the terminology in the Finnish Wordpress itself is sometimes rather confusing.)</p>
<!--more-->

<p><strong>Asennusohjeet</strong></p>
<p>Tein suomenkielisen käännöksen Wordpressin Subscribe2 -pluginiin, lataa se tästä: <a href="http://blog.mixu.net/files/2010/01/subscribe2-fi.zip">subscribe2-fi.zip</a></p>
<p>Lataa tiedosto subscribe2-fi.mo kansioon wp-content/plugins/subscribe2/. Jos WPLANG -kohta wp-config.php -tiedostossa ei ole &quot;fi&quot; (oletusarvo suomenkielisessä Wordpressissä), muuta &quot;fi&quot; tiedostonnimessä oikeaan arvoon eli WPLANG:in mukaiseksi.</p>
<h2 id="comments">Comments</h2>
<p><strong><a href="#106" title="2011-08-27 14:08:06">Oskari</a>:</strong> Kiitos tuhannesti!</p>
]]></description><link>http://localhost:5000undefined</link><guid isPermaLink="true">http://localhost:5000undefined</guid><dc:creator><![CDATA[Mixu]]></dc:creator><pubDate>Fri, 29 Jan 2010 08:00:00 GMT</pubDate></item><item><title><![CDATA[Organizing Javascript code]]></title><description><![CDATA[<p>Javascript is an interesting language because it is flexible and surprisingly powerful. Once you grow up from having one static page into having a large number of pages in a dynamic web application, you need conventions on how to organize your code.</p>
<p>In my opinion, there are two parts to the problem:</p>
<p><ol>
    <li>the easy part, which is to apply JS programming patterns</li>
    <li>the hard part, which is doing so in a consistent and maintainable manner</li>
</ol></p>
<p><h3>The easy part: Namespaces, modules and commenting conventions</h3>
<strong>Namespace and module pattern</strong></p>
<p>Javascript has no explicit syntax for advanced language features such as namespaces and private variables, but these can be implemented using very simple programming patterns.</p>
<p>A lot has been written on the namespace and module pattern, so I will only illustrate it here.</p>
<p>I like to add a &quot;placeholder&quot; function shown below to prevent me from making errors while modifying the module (<a href="http://blog.mixu.net/2009/05/internet-explorer-and-javascript-code/">IE6 freaks out</a> if there is a comma after the last item). This used to happen when I moved or added the methods and forgot to check whether that the commas are correct.</p>
<p>The example code below is adopted from (<a href="http://yuiblog.com/blog/2007/06/12/module-pattern/">http://yuiblog.com/blog/2007/06/12/module-pattern/</a>):</p>
<pre lang="Javascript"></pre>

<pre class="hljs"><code><span class="hljs-comment">// create a namespace</span>
YAHOO.<span class="hljs-keyword">namespace</span>(<span class="hljs-string">&quot;myProject&quot;</span>);
<span class="hljs-comment">// Assign the return value of an anonymous function to the namespace</span>
<span class="hljs-comment">/<strong> @namespace */</span>
YAHOO.myProject.myModule = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">/</strong> @private <em>/</span>
    <span class="hljs-keyword">var</span> myPrivateVar = <span class="hljs-string">&quot;I can be accessed only from within YAHOO.myProject.myModule.&quot;</span>;

    <span class="hljs-comment">/** @private </em>/</span>
    <span class="hljs-keyword">var</span> myPrivateMethod = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
        YAHOO.log(<span class="hljs-string">&quot;I can be accessed only from within YAHOO.myProject.myModule&quot;</span>);
    }

        <span class="hljs-comment">/<strong> @scope YAHOO.myProject.myModule */</span>
    <span class="hljs-keyword">return</span>  {
        <span class="hljs-comment">/</strong> describe myPublicProperty here <em>/</span>
        myPublicProperty: <span class="hljs-string">&quot;I&#39;m accessible as YAHOO.myProject.myModule.myPublicProperty.&quot;</span>
        <span class="hljs-comment">/** describe myPublicMethod here </em>/</span>
        myPublicMethod: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
            YAHOO.log(<span class="hljs-string">&quot;I&#39;m accessible as YAHOO.myProject.myModule.myPublicMethod.&quot;</span>);

            <span class="hljs-comment">//Within myProject, I can access &quot;private&quot; vars and methods:</span>
            YAHOO.log(myPrivateVar);
            YAHOO.log(myPrivateMethod());

            <span class="hljs-comment">//The native scope of myPublicMethod is myProject; we can</span>
            <span class="hljs-comment">//access public members using &quot;this&quot;:</span>
            YAHOO.log(<span class="hljs-keyword">this</span>.myPublicProperty);
        },
        <span class="hljs-comment">/<em>*
        </em> A placeholder function to prevent errors due to not having a comma after the last function in the return statement for this module.
        */</span>
        placeholder: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{}
};

}(); <span class="hljs-comment">// the parens here cause the anonymous function to execute and return</span></code></pre><p><strong>Commenting conventions.</strong> Pick a commenting tool and stick with it. Comment the intent of the code and any gotchas as well as the expected arguments and purpose of methods.</p>
<p>The two main JavaScript commenting tools are: <a href="http://code.google.com/p/jsdoc-toolkit/">JsDoc-Toolkit</a> (self-contained Java) and <a href="http://developer.yahoo.com/yui/yuidoc/">YuiDoc</a> (Python).</p>
<p><strong>File names and splitting code into files.</strong> Put all the hard-to-reuse code into its own namespace (ex. Framework. ModuleName. ModulePart.ApplicationName) in a separate file (application.js or custom.js). This way you keep the library clean of any application-specific stuff. It is often hard to avoid implementing some things in a one-off manner, so you might as well organize all the single-use stuff in its own file.</p>
<p>That is, if writing your own extensions to an existing framework, you will most likely have:</p>
<p><ol>
    <li>code that is fully reusable (specialized or pre-configured widgets, utilities etc.)</li>
    <li>code that is hard or pointless to reuse (page- or application-specific messages, formatting and utilities)</li>
</ol></p>
<p><h3>The hard part: structuring code for reuse, logical naming conventions</h3>
<strong>Structuring code for reuse</strong>. Encourage reuse by splitting code into configuration, implementation and customization.</p>
<p><ol>
    <li><strong>Configuration</strong> is anything that might need to change on each instantiation of your widget. It should be single section within a module (a private object in JSON notation). Make sure you have good and documented defaults, because this makes it easier to use the code again.</li>
    <li><strong>Implementation </strong> is the main code. It should NEVER contain hardcoded ID&#39;s, messages or other things that will eventually need to be overridden.</li>
    <li><strong>Customization </strong>is a set of page-specific blocks of code that alter the configuration. You only override the few things that are needed for the specific functionality on the page.</li>
</ol>
Here is an example (from <a href="http://www.wait-till-i.com/2008/05/23/script-configuration/">http://www.wait-till-i.com/2008/05/23/script-configuration/</a>):</p>
<pre class="hljs"><code>myProject.myModule = function(){
<span class="hljs-comment">// CONFIGURATION</span>
  var config = {
<span class="hljs-label">    CSS:</span>{
<span class="hljs-label">     classes:</span>{
<span class="hljs-label">       hover:</span><span class="hljs-string">&#39;hover&#39;</span>,
<span class="hljs-label">       active:</span><span class="hljs-string">&#39;current&#39;</span>,
<span class="hljs-label">       jsEnabled:</span><span class="hljs-string">&#39;js&#39;</span>
     },
<span class="hljs-label">     ids:</span>{
<span class="hljs-label">       container:</span><span class="hljs-string">&#39;maincontainer&#39;</span>
     }
    },
<span class="hljs-label">    timeout:</span><span class="hljs-number">2000</span>,
<span class="hljs-label">    userID:</span><span class="hljs-string">&#39;chrisheilmann&#39;</span>
  };

  <span class="hljs-comment">// IMPLEMENTATION</span>
  function init(){ };
  <span class="hljs-comment">// make init and config public</span>
  <span class="hljs-keyword">return</span> {
<span class="hljs-label">    init:</span>init,
<span class="hljs-label">    config:</span>config
  };
}();

<span class="hljs-comment">// CUSTOMIZATION</span>
<span class="hljs-comment">// This makes it possible to override stuff before calling init</span>
module.config.CSS.ids.container = <span class="hljs-string">&#39;header&#39;</span>;
module.config.userID = <span class="hljs-string">&#39;alanwhite&#39;</span>;
module.init();</code></pre><p><strong>Naming conventions.</strong> I don&#39;t mean deciding whether or not to use camelCase, but rather how the logical organization names of variables and widgets should be done. It is reasonably simple to stop using global variables and functions to avoid name conflicts, but what is harder is to come up with a logical naming convention that allows any code to be reused anywhere.</p>
<p>In particular, when you create new widgets, you often need to be able to connect them to one another in some manner. Being able to identifying the type (class) and retrieve/replace data from a new widget using a standard interface takes some planning and a lot of discipline, but it makes reusing the widgets much easier.</p>
<p><strong>ID and name attribute naming convention.</strong> I use &quot;data[widgetName][recordIndex][fieldName]&quot; for input names (because PHP will parse this into arrays automatically) and &quot;widgetName_fieldName_recordIndex&quot; for ID attributes (because it makes string comparisons easier).</p>
<p><strong>Widget instance naming convention. </strong>I use YAHOO.ApplicationName.WidgetInstanceName for widget instances, and use WidgetInstanceName to create any related tags with IDs.</p>
<p>I am still looking for a good logical naming convention for widgets, but it seems this topic is not as commonly discussed. If you have any tips, please leave a comment!</p>
<p><strong>Reference stuff</strong></p>
<p><a href="http://stackoverflow.com/questions/211795/are-there-any-coding-standards-for-javascript">http://stackoverflow.com/questions/211795/are-there-any-coding-standards-for-javascript</a></p>
<p><a href="http://ajaxian.com/archives/maintainable-javascript-videos-are-now-available">http://ajaxian.com/archives/maintainable-javascript-videos-are-now-available</a></p>
<p><a href="http://yuiblog.com/blog/2007/06/12/module-pattern/">http://yuiblog.com/blog/2007/06/12/module-pattern/</a></p>
<p><a href="http://www.wait-till-i.com/2008/05/23/script-configuration/">http://www.wait-till-i.com/2008/05/23/script-configuration/</a></p>
]]></description><link>http://localhost:5000undefined</link><guid isPermaLink="true">http://localhost:5000undefined</guid><dc:creator><![CDATA[Mixu]]></dc:creator><pubDate>Tue, 26 Jan 2010 08:00:00 GMT</pubDate></item><item><title><![CDATA[MVC frameworks: stack vs glue, and how to pick the right one]]></title><description><![CDATA[<p>MVC, Model-Controller-View, is all the rage in web development these days. With regards to MVC, I think the right question is to ask not whether you should use an MVC framework but rather <em>which framework fits the kinds of problems you are likely to encounter while developing your web application</em>.</p>
<p><strong>MVC frameworks: full stack vs. glue frameworks</strong></p>
<p>There are the two basic options with MVC frameworks: glue frameworks and full stack frameworks.</p>
<p><ol>
    <li>&quot;Glue frameworks&quot; are collections of components and libraries which you can use to build an application. Most of the functionality is optional and often you must make decisions regarding how you will structure control flow within your application.</li>
    <li>&quot;Full stack frameworks&quot; are integrated sets of components in which most of the components and libraries are mandatory and most of the design decisions have been made for you in advance.</li>
</ol>
<strong>How full stack frameworks sometimes get in the way: an example</strong></p>
<p>Most frameworks are optimized for the 0-3 month project. All the basic functionality you need is there, but the expectation seems to be that you are creating a custom version of a blog or a CMS and that the most complex bits will be the views (custom code) and the models (posts, users, tags, comments). However, the more you&#39;re dealing with complexity with regards to business logic, integration, regulatory validation and scaling requirements, the more likely it is that a full-stack framework will require manual optimizations and supplementary mechanisms which are not easily implementable in a full stack framework.</p>
<p>Here is one example of how a full stack framework can end up in more complexity than a glue framework. In CakePHP (a full stack framework), if you want to show multiple &quot;flash&quot; messages, you have to rather actively work around the existing mechanism, because it does not support multiple flash messages easily. Yes, you can set one message per action and you can set custom styles, but setting more than one message becomes unnecessarily complex (see <a href="http://bakery.cakephp.org/articles/view/multiple-flashes-with-different-classes">this article and have a look at the comments as well</a>) because by default, the Session flash messages overwrite each other rather than appending to the existing set of messages.</p>
<p>This is a very trivial example - and you can use the existing Session classes to create most of the functionality necessary to fix this. But if you do that, you will end up with two &quot;flash&quot; message functionalities: the default one and the one you built to make it easy to set more than one message of each type.</p>
<p>A glue framework might offer the Session functionality without directly supporting flash messages. This does mean that you have to write your own, but you&#39;ll end up with a slightly simpler codebase. These kinds of small things add up if you have a larger project.</p>
<p>Now, the key question to me when deciding which to use is:</p>
<p><strong>What kind of complexity/problems are you tackling in your application?</strong></p>
<p>The optimal choice of framework depends on covering the 80% case effectively (without compromising constraints like performance).</p>
<p>Here are some questions to consider when picking the right framework for your project:</p>
<p><ol>
    <li><strong>Complex views - What are the most probable uses of the system? </strong>Make sure you can cover the technical functionality needed to implement the most important client goals in a way that delights or at least does not annoy your customer. What is key here is the user experience you can deliver, not just technical sophistication.</li>
    <li><strong>Complex data structures - What data structure requirements are most likely to change? </strong>If possible, pick an architecture that makes the most likely changes relatively cheap to make. This may imply a tradeoff of some kind with other functionality.</li>
    <li><strong>Complex business logic - What are the key concepts and processes, and how are these likely to change?</strong> How easy is it to create exceptions to the rule and how can rules be verified and tested?</li>
    <li><strong>Complex integration - What are the key connecting technologies, and how well are they supported by the framework? </strong>Ideally, you can use pre-existing and tested code to integrate key areas.</li>
    <li><strong>Strict performance requirements - What is the everyday workload going to be? </strong>What mechanisms will allow you to identify bottlenecks in the system? Is there a possibility to optimize functionality by scaling horizontally or by bypassing some unnecessary functionality?</li>
    <li><strong>Scaling requirements - How can you partition your workload</strong>? How well do the core mechanisms lend to custom enhancements to fulfill scalability requirements?</li>
    <li><strong>Strict schedule requirements - What is the minimum feature set? </strong>How well does the framework support rapid implementation and testing of the minimum feature set? What are the main dependencies, and are there pre-existing modules or plugins for them?</li>
</ol>
If what you are building is not particularly complex, or the primary complexity is in building the views, then a full-stack framework is likely to be a great choice - particularly if you are have a very limited schedule. An example of this would be a brochure website, which has most of its complexity in the views.</p>
<p>The larger and more complex the application, the less likely you are to obtain significant productivity gains from using a framework. This is simply because having a framework can at best save you a few hundred hours of work (which should be more than what it would take for you to replicate the functionality you use). If the project is big, the time saved doing this becomes less significant compared to the time needed to build the rest of the application (e.g. the useful parts).</p>
<p><strong><span style="font-weight: normal;">
</span></strong></p>
<p><strong> </strong></p>
<h2 id="comments">Comments</h2>
<p><strong><a href="#88" title="2010-12-09 00:45:19">yash</a>:</strong> very interesting, I think it&#39;s a common mistake under tight schedule to just pick up the most popular framework and run with it, without anlyzing the performance in case the website scales and becomes more complex!</p>
<p><strong><a href="#89" title="2012-02-16 18:24:05">Bob Corrick</a>:</strong> Insightful. Thank you.</p>
<p><strong><a href="#90" title="2012-03-06 04:48:12">Tomasz Rakowski</a>:</strong> A pretty good analysis, and good conclusion.</p>
<p>The more complex the project it the more a framework becomes a hindrance. I do find however that glue frameworks tend to play out nicer on large projects, because it&#39;s easier to replace their parts with home brewed solutions.</p>
<p>Full-stack frameworks tend to be highly inflexible, but are great for simple cookie-cutter websites.</p>
]]></description><link>http://localhost:5000undefined</link><guid isPermaLink="true">http://localhost:5000undefined</guid><dc:creator><![CDATA[Mixu]]></dc:creator><pubDate>Thu, 14 Jan 2010 08:00:00 GMT</pubDate></item><item><title><![CDATA[Implementing agile development]]></title><description><![CDATA[<p>&quot;Agile development&quot; is used to describe a wide variety of development practices. Claiming that one follows an &quot;agile&quot; development methodology is easy. But declaring that your practices are &quot;agile&quot; is just about as useful as declaring yourself the winner - saying you are the winner doesn&#39;t make it so. Thus the question is, how can one ensure that what is called &quot;agile development&quot; by some company actually delivers what is expected?</p>
<p>On a surface level I believe it is rather easy to agree with the Agile values. Working in a small company, whether or not the right things are done comes down mostly to a question of self-discipline: there is a number of time-consuming and less exciting things that have a high payoff, but are not done because each person (this includes you, reader) has a preferred way of working. In most cases this good: second-guessing oneself is hardly productive. But in order to actually benefit from best practice one must not only be aware of it but also try to implement it as best possible - blindingly obvious, but somehow frequently ignored.<strong> </strong></p>
<p>McDonald et al. (2008) make an interesting reference to Auguste Compte&#39;s Law of Three Stages from 1830. The law proposes that a scientific discipline progresses through three stages: theological (belief-based knowledge), metaphysical (philosophy-based knowledge) and positive (based on scientific reasoning). The authors (each with SW development background of at least 20 years) propose that the Agile movement and manifesto represent a move from belief-based practices towards the second, philosophical stage. This is interesting because it implies that they see Agile (with a big A) is still more as a philosophy than a full methodology - or more importantly, that doing Agile well requires that you pick and define an overall framework within which you apply the Agile principles.</p>
<p>In a post on his website, Scott Ambler asks <a href="http://www.agilemodeling.com/essays/agileCriteria.htm">five questions to help determine whether a team is Agile</a>:</p>
<p><ol>
    <li>Is the team is doing developer regression testing, or better yet taking a test-driven approach to development?</li>
    <li>Are stakeholders active participants in development?</li>
    <li>Is the team producing high-quality, working software on a regular basis?</li>
    <li>Is the team is working in a highly collaborative, self-organizing manner within an effective governance framework?</li>
    <li>Is the team improving their process on a regular basis?</li>
</ol>
<strong>Some further questions</strong></p>
<p>I think these are very good questions to identify whether the Agile principles are used in developing software. But if you are thinking about implementing Agile practices, you ought to also be able to answer further questions about the underlying process:</p>
<ol>
<li><p>What are you doing to detect, predict and prevent defects? &quot;Regression testing&quot; is not an answer: what part of your testing is automated? What is the role of practices such code reviews, test scenario development and design validation in your process? Who is responsible for quality assurance and how are defects tracked?</p>
</li>
<li><p>How do you manage and communicate requirements? Who talks to the stakeholders? How do you disseminate the information? How do you track fulfilled and unfulfilled requirements? How do requirement changes influence planning and scheduling?</p>
</li>
<li><p>How are you ensuring that quality and security concerns are addressed and that lessons learned from previous projects are remembered?</p>
</li>
</ol>
<p>These are just a few process-related questions off the top of my head.</p>
<p><strong>Why can&#39;t you answer?</strong></p>
<p>If you can&#39;t answer, or aren&#39;t doing one or more of these practices, ask why not. My answer to &quot;why not?&quot; is that this is a result of a lack of appreciation of whatever the unimplemented best practices could bring, such as: automated testing, active stakeholder participation, better scheduling or controls, self-organization or process improvement accountability. While these are best practices, that does not mean that adopting them is always in the personal interest of the participants of the software development process. For example:</p>
<p>1) Active stakeholder participation may not be valued because it is considered to be customer interference rather than a method of increasing the focus on customer value, or it may not be valued because a consultancy may prefer to have a costly billable change process.</p>
<p>2) Better scheduling or controls may be seen as overhead and micromanagement by developers.</p>
<p>3) Increasing accountability for mistakes may be uncomfortable and thus seen as undesirable.</p>
<p>To me, the key question is how can we can raise the perceived value of these practices in order to create the internal motivation to implement these processes more stringently - and hence hopefully realize the benefits of best practice in our organization?</p>
<p><strong>Example: TDD</strong></p>
<p>For example, let&#39;s look at why TDD might not be valued.</p>
<p>Regression testing / test-driven development may not be seen as valuable because of beliefs such as &quot;the real work of development is implementation&quot; and &quot;quality is achieved by molding software into shape by correcting defects&quot; (McDonald et al. 2008). What could be done to create the internal motivation to implement TDD?</p>
<p>One part would be to examine these beliefs and examine the benefits of defect prevention via TDD. In particular, it may be that the negative impact of the ripple effect of flaws on dependent functionality and the cost in customer satisfaction are underestimated.</p>
<p>Second, there is a larger question of whether quality ought to take precedence over other potential priorities - because focusing on quality does not mean following best practices only when they are convenient, and throwing them out when the going gets tough. Would you trade intangibles such as quality over tangibles such as lines of codes or number of features or maintaining a release schedule? A quality-oriented organization ought to choose quality over features or schedule and be confident that this will still lead to a better result than prioritizing features or schedule.</p>
<p>Third, there ought to be an increase in emphasis on the test and quality assurance results as a deliverable. Are your test results a deliverable, and do you actually deliver them? Can you make them a deliverable? By making it clear that the results of an intangible activity are still deliverable and are visible work will increase their perceived value. An internal report may be less important than a report going to the customer (even if the report is an aggregate) and will likely help shift the emphasis from an internal, optional activity to a deliverable, required activity.</p>
<h2 id="comments">Comments</h2>
<p><strong><a href="#104" title="2009-12-20 22:39:36">Derek Neighbors</a>:</strong> I think that Agile comes down to two things..  Inspect and Adapt.  If you are doing things that are looking at how and why you are doing what you do.  Actively measuring them.  Then adapting to do them better and comparing results.. You are agile...</p>
]]></description><link>http://localhost:5000undefined</link><guid isPermaLink="true">http://localhost:5000undefined</guid><dc:creator><![CDATA[Mixu]]></dc:creator><pubDate>Sat, 19 Dec 2009 08:00:00 GMT</pubDate></item><item><title><![CDATA[Tip: Netbeans 6.x scanning performance fix]]></title><description><![CDATA[<p>I use <a href="http://www.netbeans.org/">Netbeans</a> as my primary editor. It&#39;s a great editor with pretty much all the features I would want built in (zero-configuration Mercurial support, code completion+navigation, unit testing support and more) .</p>
<p>The only caveat has been the performance - I was so frustrated I installed (and ultimately rejected) the vast majority of other (PHP) editors. There is a simple fix if you have memory to spare: increase the heap size in the startup options. The Java VM default heap size seems to be way too small, causing a lot of swapping within the Java VM (while not using all the memory available from the OS perspective).</p>
<p><strong>Fixing Netbeans scanning performance </strong></p>
<p>Open /etc/netbeans.conf (e.g. C:Program FilesNetbeans 6.xetcnetbeans.conf). If you are on Windows 7, you need to start your text editor with Administrator privileges (right click and select Run as..).</p>
<p>Change the line: netbeans_default_options=&quot;-J-client -J-Xverify:none ....&quot;</p>
<p>by adding the following to the single line (AFTER &quot;-J-client -J-Xverify:none&quot;):</p>
<pre class="hljs"><code>-<span class="ruby"><span class="hljs-constant">J</span>-<span class="hljs-constant">Xmx2048m</span> -<span class="hljs-constant">J</span>-<span class="hljs-constant">XX</span><span class="hljs-symbol">:+UseConcMarkSweepGC</span> -<span class="hljs-constant">J</span>-<span class="hljs-constant">XX</span><span class="hljs-symbol">:+CMSClassUnloadingEnabled</span>
</span>-<span class="ruby"><span class="hljs-constant">J</span>-<span class="hljs-constant">XX</span><span class="hljs-symbol">:+CMSPermGenSweepingEnabled</span></span></code></pre><p>The -Xmx option changes the maximum heap size the Java virtual machine can address to 2048M from the default value (which is a &quot;best guess&quot; method). The other three are explained in the conf file.</p>
<p>DONE! Ever since I made this tweak (about two months ago) there have been no additional pauses at all. My theory is that the Netbeans scanning code was exhausting the heap, and a majority of the time &quot;scanning&quot; was instead spent dealing with the heap exhaustion. Now I will not say that it is reasonable for an IDE to consume 2 gigabytes of memory - but if that&#39;s what it takes to fix performance, fine.</p>
<p>&nbsp;</p>
<h2 id="comments">Comments</h2>
<p><strong><a href="#74" title="2009-12-02 04:48:13">Petr Jiricka</a>:</strong> Hi, thanks for blogging about this. We would like to fix the problem so you don&#39;t have to do this workaround. Can I ask:</p>
<ul>
<li>Is your experience based on NetBeans 6.7.x or 6.8 RC1? We made significant improvements in NB 6.8, so can you please try whether it behaves better out of the box?</li>
<li>Can you be specific about how big is your project (number of files), and how long the scanning takes+how often you face the problem? We regularly test performance on mid-size projects, but it is true that there can be problems for huge projects.</li>
<li>Can you tell us about your hardware? I.e. size of memory, processor etc? Also, do you store your source files locally, or on a remote/network drive?</li>
<li>Can you test the performance of working with your project outside of the Mercurial tree? I.e. if you export the sources from Mercurial and then point the IDE at the exported sources (and closing the project inside the Mercurial tree).</li>
</ul>
<p>Thanks for your help - if you like, you can send your replies to my e-mail petr.jiricka at sun dot com.</p>
<p>Petr</p>
<p><strong><a href="#75" title="2009-12-02 07:48:12">Mikito Takada</a>:</strong> Hi Petr,</p>
<p>I am stunned that you responded so quickly, and very glad to hear that the Netbeans team is actively working on the issue (and clearly keeping a Google Alert on Netbeans!).</p>
<p>1) My experience is based on Netbeans 6.7, and at least for 6.8 Beta I had the same issue. I installed 6.8 RC1 yesterday, so I will have to see if the issue still occurs without the workaround, and update the post accordingly in a few days.</p>
<p>2) The projects are about 2000 - 5000 files excluding Mercurial directories. On 6.7, the scanning used to take random amounts of time (sometimes minutes, sometimes hours unless stopped). With the fix, the time went down to to mere seconds. Will see with 6.8RC1.</p>
<p>3) Core i7-920 + 6GB memory with source files stored locally on what I would imagine is a 7200rpm drive.</p>
<p>4) Will see later and post an update here.</p>
<p><strong><a href="#76" title="2009-12-09 15:17:23">AdamO</a>:</strong> I was having the same problem with Netbeans 6.7.1...  I have my source folder (9000+ files) mounted over sftp via Webdrive (caching enabled).  Scanning was taking forever and locking up the rest of the app, making it impossible to do anything until after scanning had stopped.  I just tried 6.8RC2 and scanning still takes a while, but at least it doesn&#39;t lock up everything else.  Now I&#39;m able to work comfortably with the scan in progress.</p>
<p><strong><a href="#77" title="2009-12-10 17:31:02">Adam Overlock</a>:</strong> I also noticed there&#39;s a &quot;Scan on Demand&quot; plugin available for 6.8RC2, allowing you to disable automatic scanning and run it when you want it to run.</p>
<p><strong><a href="#78" title="2009-12-19 02:33:54">Randy</a>:</strong> If scanning was properly implemented in Netbeans, it would be in a discrete thread, prioritized lower than the app. It&#39;s insane that when it scans, you can&#39;t do anything else. Yes, in 6.8 this happens.</p>
<p>I have a quad core, and the app is locked scanning with less than 5% cpu usage.</p>
<p>R</p>
<p><strong><a href="#79" title="2009-12-22 12:23:53">Mike</a>:</strong> I have the same issue with 6.8. The CPU usage is not always high, but the UI is so slow it is unusable.  I am going to try upping the heap.  Thanks for the post.</p>
<p><strong><a href="#80" title="2010-01-25 14:32:21">Tres Finocchiaro</a>:</strong> I&#39;m experiencing this on Windows 7 Enterprise x86 single core CPU.  I will try the suggested work-around, however I agree with the Netbeans developer that fixing this as part of the release cycle makes it better for stuff like upgrading.</p>
<p>The release information:
    Product Version: NetBeans IDE 6.8 (Build 200912041610)
    Java: 1.5.0_22; Java HotSpot(TM) Client VM 1.5.0_22-b03
    System: Windows 7 version 6.1 running on x86; Cp1252; en_US (nb)
    Userdir: C:Userstfino.netbeans6.8</p>
<p>-Tres</p>
<p><strong><a href="#81" title="2010-02-15 22:48:27">hemuman</a>:</strong> My problem Solved with &quot;Scan on Demand&quot;. It use to scan for ages....
thanks Adam Overlock</p>
<p><strong><a href="#82" title="2010-04-17 20:45:25">Roy</a>:</strong> But if you use Scan on demand, you indexes could be out of date and could cause some lost of data.</p>
<p><strong><a href="#83" title="2010-05-19 14:55:32">Bruce</a>:</strong> I also noticed there&#39;s a &quot;Scan on Demand&quot; plugin available for 6.8RC2, allowing you to disable automatic scanning and run it when you want it to run.</p>
<p><strong><a href="#84" title="2010-08-29 06:27:35">g</a>:</strong> that&#39;s right!</p>
<p>combination of enabling Scan On Demand Plugin
and also disabling Mercury Plugin</p>
<p>make our CPU Usage more safer... and lower of course...
glad to hear everything is now stable... :D</p>
<p><strong><a href="#85" title="2011-02-28 11:05:35">Thorsten</a>:</strong> Thanks for this article. The CPU usage of netbeans was realy horrible.</p>
<p>Noe after changing the config it is realy usable. Maybe I will try the scan ondemand plugin later.</p>
<p>thanks</p>
<p><strong><a href="#86" title="2012-01-12 12:43:07">Rob Haag</a>:</strong> Thank You! Just got a Win. machine (linux nerd myself)...same issue for me...even now using NB 7.1 on Windows 7 (64bit). Have a 2 core (intel 6200) w/ 4gb of RAM...your fix made a huge difference. I&#39;m remoting to my Linux box so I can take the show on the road now and again, but even with a local project (empty) the &#39;scanning&#39; was hanging forever on 100% mark.</p>
<p><strong><a href="#87" title="2012-02-17 14:55:38">Raja</a>:</strong> Friends,
   I also affected by the Scanning Projects issue. after i installed the Scan on Demand plugin also can&#39;t solved this.
  Finally i removed my - Project  - right Click -&gt; Project Properties - removed one big folder(user_java- under this all the project files here). then only solved this issue. So pls just check for this small pin pbms and corrected.</p>
<p>Thanks,
CRT.</p>
]]></description><link>http://localhost:5000undefined</link><guid isPermaLink="true">http://localhost:5000undefined</guid><dc:creator><![CDATA[Mixu]]></dc:creator><pubDate>Tue, 01 Dec 2009 08:00:00 GMT</pubDate></item><item><title><![CDATA[Setting up SPF, SenderID and DKIM on Centos 5.3 using sendmail]]></title><description><![CDATA[<p>The biggest four email providers Gmail, AOL, Hotmail and Yahoo (in this order <a href="http://www.informationweek.com/news/internet/google/showArticle.jhtml?articleID=219400298">according to Comscore</a>) all implement some form of anti-spam techniques.</p>
<p>The main technologies are reverse DNS checking, SPF, SenderID, Domainkeys and DKIM. I will discuss all of these here and provide my tips on setting up SPF, SenderID and DKIM. Please keep in mind that I am not an expert on email servers - but I hope this helps someone! It took me about half a day to figure this all out, so it is probably worth doing to improve your email delivery rates.</p>
<p><a href="http://zohrob.com/posts/entrepreneurs-guide-to-email-delivery-part-2.html">This blog entry from Dave Zohrom provides a nice discussion of sending email to a general audience</a> (part 2 of a 3-post series).</p>
<p><h2>Introduction</h2>
<strong>SPF or Sender Policy Framework</strong></p>
<p>SPF is easy to setup. It uses DNS TXT records to allow the email providers to check which servers are authorized to send email for a particular domain. The SPF project has done a great<strong> </strong>job at making this simple to setup. Just <a href="http://www.openspf.org/">go to their homepage</a> and use the setup wizard to generate the appropriate TXT records (the text field underneath &quot;Deploying SPF&quot;). Then change the values in your DNS records.</p>
<p>One thing to note is that if you have multiple servers and send email from a server with a different hostname (e.g. &quot;mail.example.com&quot;), you need to setup a record for that server as well. See <a href="http://www.openspf.org/FAQ/Common_mistakes">the common mistakes page on the SPF site</a>. Also, if you have hostnames that are not supposed to send mail, you ought to indicate this as well.</p>
<p>Another thing is that if you are using Google Apps for Your Domain to send email, then you will need to have to add &quot;include:aspmx.googlemail.com&quot; to also allow mail from Google to validate. See <a href="http://www.google.com/support/a/bin/answer.py?hl=en&amp;answer=33786">this answer for more</a>.</p>
<p><strong>SenderID from Microsoft</strong></p>
<p>SenderID is a variant of SPF, which for most practical cases is the same as SPF. Just setup SPF and this should produce a validation pass for SenderID as well. The semantics of the validation are a bit different,  but this does not seem to be a major practical problem. See testing tips below to make sure that this is also true in your case.</p>
<p><strong>DomainKeys</strong></p>
<p>DomainKeys is an older version of DKIM (DomainKeys Identified Mail) developed by Yahoo. Despite having very similar names, these ARE NOT the same!</p>
<p>Both DomainKeys and DKIM store public key information in DNS records and sign the message headers of every email sent. The recipient can then verify the signature.</p>
<p>DomainKeys was deprecated in 2007, but some email providers may still be using it. However, <a href="http://blog.deliverability.com/2009/09/franck-martin-on-the-future-of-dkim-and-domainbased-reputation-.html">these are a shrinking minority </a>and Yahoo does support the newer DKIM. <span style="background-color: #ffffff;">Because of this I did not add DomainKeys support but opted only to use DKIM.</span></p>
<p><span style="background-color: #ffffff;">You can add it to sendmail or Postfix using the dk-milter project code, but the unofficial RPM release <a href="http://www.topdog-software.com/oss/dk-milter/">is not maintained anymore</a>, which means you will need to install it from source (<a href="http://sourceforge.net/projects/dk-milter/">available via SourceForge</a>).</span></p>
<p><span style="background-color: #ffffff;"><strong>DKIM, or DomainKeys Identified Mail</strong></span></p>
<p><span style="background-color: #ffffff;">DKIM on the other hand seems to be gaining momentum. It is used by Gmail, Yahoo and AOL and many others, and also works by publishing public keys via DNS TXT records and by signing the emails at the email server.</span></p>
<p><span style="background-color: #ffffff;">To setup DKIM, you need an additional filter which takes the completed email and adds the DKIM signature to the email prior to sending it out.</span></p>
<p><span style="background-color: #ffffff;">Postfix and sendmail support &quot;<a href="http://en.wikipedia.org/wiki/Milter">milters</a>&quot;, which is apparently short for &quot;mail filter&quot;. There is a DKIM-milter package available for Centos at the EPEL repositories (see <a href="http://wiki.centos.org/AdditionalResources/Repositories">Centos page for 3rd party repos</a>).</span></p>
<p><h2><span style="background-color: #ffffff;">Setting up DKIM-milter with sendmail</span></h2>
<strong>Updated: Linked tutorial is DEAD. Here are the steps:</strong></p>
<p><strong>Step 1. Generate a private key</strong></p>
<p>openssl genrsa -out default.private 1024</p>
<p>A “default.private” key file will be generated. It will be moved to a specific location later.</p>
<p><strong>Step 2. Generate a public key for this private key</strong></p>
<p>openssl rsa -in default.private -pubout -out default.public -outform PEM</p>
<p>A file with filename “default.public” will be generated with content like</p>
<p>-----BEGIN PUBLIC KEY-----</p>
<p>...</p>
<p>-----END PUBLIC KEY----</p>
<p>It will be used to create a DNS TXT record. See next step.</p>
<p><strong>Step 3. Create a DNS record of type TXT</strong></p>
<p>Modify DNS records and add a record of type TXT:</p>
<p>TXT record name</p>
<p>default._domainkey</p>
<p>TXT record value</p>
<p>v=DKIM1; g=*; k=rsa; p=&lt;content of default.public&gt;</p>
<p>Note that the prefix “—–BEGIN PUBLIC KEY—–” and suffix “—–END PUBLIC KEY—-” should not be put in the TXT record value.</p>
<p>This DNS record will be retrieved by mail receivers who want to verify emails with DKIM signatures. The record name “default._domainkey” tells verifier that the “selector” of this signature is “default”, therefore if you are changing selector name to something else, make sure you change all of them consistently.</p>
<p><strong>Step 4. Install dkim-milter in Fedora</strong></p>
<p>Run the following as root to install the dkim-milter pacakge.</p>
<p>yum install dkim-milter</p>
<p><strong>Step 5. Enable dkim-milter to run on start-up</strong></p>
<p>Make sure dkim-milter service will run on start-up by running this command:</p>
<p>chkconfig --level 3 dkim-milter on</p>
<p>Note that your server may use a different “runlevel”. You can check “/etc/inittab” to see which run level you are on.</p>
<p><strong>Step 6. Move private key to appropriate location</strong></p>
<p>As root, copy the private key to the location specified by the “keylist” (refer to next step) and make sure it is readable by dkim-milter:</p>
<p>mkdir /etc/dkim-milter/</p>
<p>mv default.private /etc/dkim-milter/default</p>
<p>chown dkim-milter.dkim-milter /etc/dkim-milter/default</p>
<p>Make sure the filename of private key file matches the “selector” name specified in the DNS record.</p>
<p><strong>Step 7. Add an entry to the keylist for dkim-milter to read</strong></p>
<p>Add the following line to /etc/mail/dkim-milter/keys/keylist. Replace &lt;domain.com&gt; with your domain name.</p>
<p>*:&lt;domain.com&gt;:/etc/dkim-milter/default</p>
<p><span style="background-color: #ffffff;"><strong>Step 8. Configure dkim-milter</strong></span></p>
<p><span style="background-color: #ffffff;">Open configuration file /etc/mail/dkim-milter/dkim-filter.conf and use the following configuration:</span></p>
<pre class="hljs"><code>Canonicalization simple
Domain example.com
KeyFile /some/path/<span class="hljs-keyword">to</span>/whatever-your-keyfile-was
<span class="hljs-keyword">Selector</span> name-<span class="hljs-keyword">of</span>-the-<span class="hljs-keyword">selector</span>
SignatureAlgorithm rsa-sha256
Socket inet:<span class="hljs-number">8891</span>@localhost
Syslog Yes
Userid dkim-milter</code></pre><p>NOTE: you will be configuring dkim-milter to use the loopback interface instead of a socket file. I was unable to get dkim-milter to work via the socket file with sendmail. If you get it working, let me know.</p>
<p>You may also want to setup the following:</p>
<pre class="hljs"><code><span class="hljs-title">SubDomains</span> Yes
SyslogSuccess Yes
X-Header Yes</code></pre><p><span style="background-color: #ffffff;">The X-Header and Syslog options are useful for debugging. See the config file, each option should be documented there.</span></p>
<p><strong>Step 9. Change the default init.d script to use the loopback interface</strong></p>
<h2 id="comments">Comments</h2>
<p><strong><a href="#64" title="2009-11-23 12:14:23">radu</a>:</strong> I&#39;ve used this:
Canonicalization simple
Domain mydomain.com
KeyFile /etc/dkim-milter/default
Selector mail
Signature default
SignatureAlgorithm rsa-sha256
Socket inet:8891@localhost
Syslog Yes
Userid dkim-milter
SubDomains Yes
SyslogSuccess Yes
X-Header Yes</p>
<p>but it says:
Starting DomainKeys Identified Mail Milter (dkim-filter): dkim-filter: /etc/mail/dkim-milter/dkim-filter.conf: configuration error at line 5: unrecognized parameter</p>
<p>The selector name is &quot;default&quot;.</p>
<p>Do you know what&#39;s wrong?</p>
<p><strong><a href="#65" title="2009-11-23 14:43:35">admin</a>:</strong> Hi, it&#39;s a mistake in my post, the &quot;Signature default&quot; part should not be there (there is no Signature parameter). Fixed this in the post.</p>
<p>So try removing that line.</p>
<p>See man dkim-filter.conf for the actual options.</p>
<p><strong><a href="#66" title="2009-11-24 06:02:56">radu</a>:</strong> Great, thanks.</p>
<p>Do you know how to setup this for multiple domains?</p>
<p><strong><a href="#68" title="2010-05-05 05:52:26">Vnmls</a>:</strong> Good tutorial, thanks!  Couple things I ran into:</p>
<ol>
<li>I had to put the INPUT_MAIL_FILTER into sendmail.mc, not submit.mc.  Sendmail was not communicating w/ dkim-milter at all until I did this.</li>
<li>I see no mention of ADSP.  Your readers can go here: <a href="http://www.sendmail.org/dkim/tools">http://www.sendmail.org/dkim/tools</a> to help set this up.</li>
</ol>
<p><strong><a href="#69" title="2010-09-18 19:15:13">Steve Jenkins</a>:</strong> Thanks for this write-up. I used OpenDKIM on my CentOS setup, and wrote about it <a href="http://stevejenkins.com/blog/2010/09/how-to-get-dkim-domainkeys-identified-mail-working-on-centos-5-5-and-postfix-using-opendkim/" rel="nofollow">here</a>.</p>
<p><strong><a href="#71" title="2012-05-26 16:44:25">Daisy Rosa</a>:</strong> I also had to move
INPUT_MAIL_FILTER
from  submit.mc to sendmail.mc</p>
<p><strong><a href="#72" title="2012-05-26 16:45:27">Daisy Rosa</a>:</strong> For multiple domains do:
REPLACE
Domain example.com
WITH
Domain example1.com, example2.com, example3.com</p>
<p><strong><a href="#73" title="2012-06-10 23:56:19">Kris</a>:</strong> Great doc, but it is missing the starting of dkim-milter.</p>
<p>So you have do add:</p>
<p>service dkim-milter start</p>
<p>after its install via yum.</p>
]]></description><link>http://localhost:5000undefined</link><guid isPermaLink="true">http://localhost:5000undefined</guid><dc:creator><![CDATA[Mixu]]></dc:creator><pubDate>Tue, 03 Nov 2009 08:00:00 GMT</pubDate></item><item><title><![CDATA[Picking the right nonfiction book]]></title><description><![CDATA[<p>When it comes to reading, I&#39;m spoiled! I notice I am getting more and more picky when it comes to ordering books from Amazon, which makes finding books that seem worth reading much harder to find.</p>
<p>Over the years I&#39;ve read quite a pile of books particularly related to programming, general business, entrepreneurship and software engineering. Now that I am reading up on new topics such as organizational development, lean methods and statistical research methods I am having real trouble finding books I would consider reading just based on the table of contents and Amazon reviews. This is probably a good thing, since the most efficient way to get information is to only read good books.</p>
<p>Here are a couple of guidelines for picking good non-fiction books:</p>
<p><ol>
    <li><strong>Number of reviews.</strong> If there is only a small number of reviews, there is a risk that those reviews are written by the author or his/her friends. A book with more reviews is more credible, as is a book which has had more editions.</li>
    <li><strong>Distribution of reviews. </strong>If the reviews are split between 5-star and 1-star reviews, the 5-star reviews are most likely fake. This is an absolutely disgusting practice, but unfortunately common.</li>
    <li><strong>Credentials of the authors.</strong> If the authors are practitioners and not scientists, make sure they do not work for a consultancy. I have unfortunately 1-2 books that I did not check adequately and ended up getting a useless brochure book.</li>
    <li><strong>The table of contents.</strong></p>
<p><ol>
    <li><strong>What is the starting point of the discussion? </strong>This defines the prerequisite knowledge that you are expected to have. Reading a book which is for beginners is incredible boring, while reading an advanced book as a beginner is frustrating.Evaluate whether you have the prerequisite knowledge and could read the first few chapters without getting bored to tears. Remember that most popular business books are written for an audience that reads just a few books per year - this pretty much makes them too repetitive if you read more than that.</li>
    <li><strong>What is the emphasis of the book? </strong>Is it oriented towards: a) practice or b) checklists, c) proper theory or d) undergraduate students textbook? (See below for more)</li>
    <li><strong>How many pages are dedicated towards each topic? </strong>Don&#39;t expect anything good from a book that has a 200 pages and cover 200 topics: that&#39;s just one tiny page per topic.Good books don&#39;t cover everything with the same small amount of pages, because everything is not equally important in real life.</li>
</ol>
</li>
    <li><strong>The actual content of the reviews.</strong> Don&#39;t bother with 5- or 4-star reviews, they will just tell you the book is good. Read the 1-star and 3-star reviews.See if the 1-star reviews seem to be justified or are just a result of the reviewer being an idiot (e.g. &quot;Haven&#39;t received book from Amazon&quot; or &quot;This book is too difficult&quot; -reviews).3-star reviews are usually the best, since the author did like some aspects but did not like others. Pay attention to reviews that say that a book is too basic or simple. If this is said more than once, you probably don&#39;t want to read that book - American writing in particular is already very verbose and too many books are written where a five-page article would do, hence reviews which state that the book is too simple should be taken very seriously.</li>
    <li><strong>Number of and affiliation of authors. </strong>If all the authors are from the same institution or organization, the book is probably of lower quality. A huge warning sign is a &quot;collection&quot; book that has multiple chapters on different topics by the same authors, all from the same decade. This indicates that the authors have not bothered to contact the people who are at the top of their respective fields; articles which are all from the same decade are likely to be just a random set of articles which were written for the book rather than the result of good editorial work.</li>
    <li><strong>Order of topics. </strong>Scientific collection books usually order the chapters so that the better and more widely applicable material is at the front of the book, and the more specialized and less interesting material is at the end. It is safe to assume that if the chapter that seems decent for your purpose is at the end of the book, you are better off finding a more specialized book.</li>
</ol>
<strong>Four classes of books:</strong></p>
<p>I would put books in four broad categories, two of which are useful and two are useless:</p>
<p><ol>
    <li>Practical books</li>
    <li>Academic books</li>
    <li>Ego-booster books</li>
    <li>Motivational books</li>
</ol>
<strong>Practical books: experience-based vs checklist books</strong></p>
<p>Practical books are in my opinion divisible into two categories: advice from practitioners and advice from people who like to write checklists. That is, you have books that are based on the experiences of a practitioner, and then you have books that are written by people who have not actually done that much but wanted to write a book and ended up writing a checklist - a list of things that might be of use without really emphasizing what is important.</p>
<p>Try to get a feel of the book from the preview (if you can&#39;t, don&#39;t buy it!), search for a couple of phrases that interest you. Does the author know what they are doing, or are they just collecting information from other people? Sometimes a &quot;checklist book&quot; is not bad - when you just need the basics and can&#39;t be bothered to collect all the information. However, usually the experience-based book is better.</p>
<p><strong>Academic books: theory vs textbook</strong></p>
<p>When it comes to academic books, the two main types are proper theory books and textbooks. The more I have seen and read textbooks, the less I like them. Generally speaking they try to cover everything and end up saying nothing.</p>
<p>If you care about the topic, don&#39;t get a textbook. Instead, get a proper collection of influential articles if it exists (ex. Oxford Handbook of X). You will perhaps not be fully prepared for everything you read, but you will learn something useful. Unlike after reading a textbook, where you just have fuzzy awareness of the fact that &quot;all kinds of things happen&quot; in a particular field.</p>
<p><strong>Ego-booster books: academic and practical</strong></p>
<p>There is also another category of books which are basically books written for the author&#39;s ego. Some books are not written to be read, they are written either to impress others or to act as marketing tools.</p>
<p>The academic substitute for having a nice car sometimes seems to be writing an obtuse treatise which is downright hostile towards the reader, while consultancies in particular are guilty of writing books in which the answer to every question is &quot;hire our consultancy&quot;. The academic ego book is harder to spot, so pay attention when previewing the book.</p>
<p><strong>Motivational books: feeling good doesn&#39;t make it so</strong></p>
<p>Finally, there is a category of fiction books which pretend to be non-fiction books. The motivational books may be a fun read at times, and are usually the most popular books in their category.</p>
<p>However, they are fiction for your entertainment. Feeling good is nice, but that does not change the fact that there are people who are knowledgeable, talented and well-connected doing whatever the book is about, and that feeling good does not make you knowledgeable, talented or well-connected.</p>
]]></description><link>http://localhost:5000undefined</link><guid isPermaLink="true">http://localhost:5000undefined</guid><dc:creator><![CDATA[Mixu]]></dc:creator><pubDate>Mon, 02 Nov 2009 08:00:00 GMT</pubDate></item></channel></rss>